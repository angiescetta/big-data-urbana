<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Clase 4 INFORMACIÓN GEOGRÁFICA Y MAPAS | 01-conocer.Rmd</title>
  <meta name="description" content="Clase 4 INFORMACIÓN GEOGRÁFICA Y MAPAS | 01-conocer.Rmd" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Clase 4 INFORMACIÓN GEOGRÁFICA Y MAPAS | 01-conocer.Rmd" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Clase 4 INFORMACIÓN GEOGRÁFICA Y MAPAS | 01-conocer.Rmd" />
  
  
  

<meta name="author" content="Angie Scetta" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="análisis-y-visualización-de-datos.html"/>

<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Big Data Urbana</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>INTRODUCCIÓN</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#indice"><i class="fa fa-check"></i>Indice</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="presentación.html"><a href="presentación.html"><i class="fa fa-check"></i><b>1</b> PRESENTACIÓN</a>
<ul>
<li class="chapter" data-level="1.1" data-path="presentación.html"><a href="presentación.html#interfaz-gráfica-de-rstudio"><i class="fa fa-check"></i><b>1.1</b> Interfaz Gráfica de RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="presentación.html"><a href="presentación.html#formato-rmarkdown"><i class="fa fa-check"></i><b>1.2</b> Formato RMarkdown</a></li>
<li class="chapter" data-level="1.3" data-path="presentación.html"><a href="presentación.html#nuestro-primer-dataset"><i class="fa fa-check"></i><b>1.3</b> Nuestro primer dataset</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html"><i class="fa fa-check"></i><b>2</b> MANIPULACIÓN DE DATOS</a>
<ul>
<li class="chapter" data-level="2.1" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#filtrar-registros-que-cumplan-condiciones"><i class="fa fa-check"></i><b>2.1</b> Filtrar registros que cumplan condiciones</a></li>
<li class="chapter" data-level="2.2" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#seleccionar-columnas-de-interés"><i class="fa fa-check"></i><b>2.2</b> Seleccionar columnas de interés</a></li>
<li class="chapter" data-level="2.3" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#modificar-o-agregar-columnas"><i class="fa fa-check"></i><b>2.3</b> Modificar o agregar columnas</a></li>
<li class="chapter" data-level="2.4" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#ordenar-registros"><i class="fa fa-check"></i><b>2.4</b> Ordenar registros</a></li>
<li class="chapter" data-level="2.5" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#renombrar-columnas"><i class="fa fa-check"></i><b>2.5</b> Renombrar columnas</a></li>
<li class="chapter" data-level="2.6" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#resumir-y-agrupar-datos"><i class="fa fa-check"></i><b>2.6</b> Resumir y agrupar datos</a></li>
<li class="chapter" data-level="2.7" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#concatenar-funciones"><i class="fa fa-check"></i><b>2.7</b> Concatenar funciones (%&gt;%)</a></li>
<li class="chapter" data-level="2.8" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#transformar-la-estructura-de-los-datos"><i class="fa fa-check"></i><b>2.8</b> Transformar la estructura de los datos</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#extender-la-estructura-de-los-datos-spread"><i class="fa fa-check"></i><b>2.8.1</b> Extender la estructura de los datos: spread()</a></li>
<li class="chapter" data-level="2.8.2" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#unificar-los-datos-gather"><i class="fa fa-check"></i><b>2.8.2</b> Unificar los datos: gather()</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html"><i class="fa fa-check"></i><b>3</b> ANÁLISIS Y VISUALIZACIÓN DE DATOS</a>
<ul>
<li class="chapter" data-level="3.1" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#distribución-de-una-variable-continua"><i class="fa fa-check"></i><b>3.1</b> Distribución de una variable continua</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#histograma"><i class="fa fa-check"></i><b>3.1.1</b> Histograma</a></li>
<li class="chapter" data-level="3.1.2" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#gráfico-de-densidad"><i class="fa fa-check"></i><b>3.1.2</b> Gráfico de Densidad</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#distribución-de-valores-continuos-asociados-a-una-variable-categórica-gráfico-de-cajas"><i class="fa fa-check"></i><b>3.2</b> Distribución de valores continuos asociados a una variable categórica: Gráfico de Cajas</a></li>
<li class="chapter" data-level="3.3" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#relación-entre-variables-numéricas-gráfico-de-dispersión"><i class="fa fa-check"></i><b>3.3</b> Relación entre variables numéricas: Gráfico de Dispersión</a></li>
<li class="chapter" data-level="3.4" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#relación-entre-variables-categóricas-gráfico-de-matriz"><i class="fa fa-check"></i><b>3.4</b> Relación entre variables categóricas: Gráfico de Matriz</a></li>
<li class="chapter" data-level="3.5" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#relación-entre-variable-numérica-y-categórica-gráfico-de-barras"><i class="fa fa-check"></i><b>3.5</b> Relación entre variable numérica y categórica: Gráfico de Barras</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html"><i class="fa fa-check"></i><b>4</b> INFORMACIÓN GEOGRÁFICA Y MAPAS</a>
<ul>
<li class="chapter" data-level="4.1" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#analizar-datos-espaciales"><i class="fa fa-check"></i><b>4.1</b> Analizar datos espaciales</a></li>
<li class="chapter" data-level="4.2" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#cruzar-datos-tradicionales-y-espaciales"><i class="fa fa-check"></i><b>4.2</b> Cruzar datos tradicionales y espaciales</a></li>
<li class="chapter" data-level="4.3" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#cruzar-datos-espaciales"><i class="fa fa-check"></i><b>4.3</b> Cruzar datos espaciales</a></li>
<li class="chapter" data-level="4.4" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#agregar-mapa-base"><i class="fa fa-check"></i><b>4.4</b> Agregar mapa base</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">01-conocer.Rmd</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="información-geográfica-y-mapas" class="section level1" number="4">
<h1><span class="header-section-number">Clase 4</span> INFORMACIÓN GEOGRÁFICA Y MAPAS</h1>
<p>Ahora nos toca <strong>visualizar en un mapa toda la información</strong> que estuvimos analizando en los módulos anteriores. Para esto, vamos a trabajar con la información geográfica que contiene nuestro dataset y vamos agregar otras fuentes de datos geográficos.</p>
<p>Pero antes de empezar, ¿A que nos referimos cuando hablamos de <strong>Sistemas de Información Geográfica</strong> o <strong>SIG</strong>? Bueno, nos referimos a las herramientas informáticas que nos permiten ubicar y analizar un conjunto de datos en lugares específicos del territorio (georreferenciar).</p>
<p>Para poder hacer uso de los SIG necesitamos contar con información geográfica en nuestro dataset, es decir, que además de la información que ya vimos que puede haber en un dataset tradicional, se sume un componente espacial en cada registro (partido, barrio, manzana, calle o directamente las coordenadas X e Y).</p>
<p>Las herramientas que nos permitirán visualizar toda esta información serán los <strong>mapas</strong>, que son nada más y nada menos que representaciones planas, reducidas y simplificadas de la tierra que nos dan la posibilidad cruzar y relacionar datos en el espacio. Es decir que, mantienen una relación ordenada en el traspaso de puntos ubicados en la superficie curva de la tierra a puntos ubicados en la superficie plana de los mapas. Esto es posible a partir del uso de sistemas de coordenadas proyectadas.</p>
<p>En R hay varios paquetes de funciones que nos permiten manipular este tipo de información, entre los que se encuentra <code>sf</code>, que lo aprenderemos hoy. Para comenzar a utilizarlo vamos a tener que instalarlo y luego activarlo con <code>library()</code> al igual que lo veníamos haciendo con <code>tidyverse</code>:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="información-geográfica-y-mapas.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb155-2"><a href="información-geográfica-y-mapas.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(sf)</span></span>
<span id="cb155-3"><a href="información-geográfica-y-mapas.html#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code></pre></div>
<p>Como verán, activamos los 2 paquetes porque ambos presentan funciones que son necesarias a la hora de mapear información.</p>
<div id="analizar-datos-espaciales" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Analizar datos espaciales</h2>
<p>Llegó el momento de conocer y analizar datos espaciales. Para esto, como hicimos en cada clase, volvamos a cargar nuestros datos de Properati:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="información-geográfica-y-mapas.html#cb156-1" aria-hidden="true" tabindex="-1"></a>datos_amba <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/amba_properati.csv&quot;</span>)</span></code></pre></div>
<p>Y repasemos el gráfico que generamos la clase pasada con <code>geom_point()</code> asignando la variable longitud (lon) en el eje X y la latitud (lat) en el Y:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="información-geográfica-y-mapas.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba) <span class="sc">+</span></span>
<span id="cb157-2"><a href="información-geográfica-y-mapas.html#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat, <span class="at">color=</span>provincia))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-104-1.png" width="1050" /></p>
<p>Con mucha imaginación uno puede darse cuenta que los datos tienen la forma de AMBA, pero está faltando información que nos facilite la lectura del mismo. Para esto sumemos un dataset más a nuestro proyecto que en este caso, será un dataset espacial en formato shapefile (SHP) con las geometrías correspondientes a todos los partidos de AMBA. Pueden descargarlo (es un .zip que contiene el SHP) en el siguiente link: <a href="https://data.world/angie-scetta/partidos-amba" class="uri">https://data.world/angie-scetta/partidos-amba</a></p>
<p><em>Recomendación: Al igual que con el csv que trabajamos en las clases anteriores, al descargar el shape deberán moverlo de la carpeta “Descargas” a la carpeta llamada “data” dentro del Proyecto donde estan trabajando.</em></p>
<p>Para poder cargar nuestros datos espaciales en formato shp utilizaremos la función <code>st_read()</code> de la siguiente forma:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="información-geográfica-y-mapas.html#cb158-1" aria-hidden="true" tabindex="-1"></a>partidos_amba <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;data/partidos_amba.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `partidos_amba&#39; from data source `E:\03-OTROS\SCA-CURSOS-2020\sca-big-data-urbana\data\partidos_amba.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 48 features and 3 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -59.3392 ymin: -35.23893 xmax: -57.70946 ymax: -34.23007
## CRS:            4326</code></pre>
<p>Veamos que información contiene:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="información-geográfica-y-mapas.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(partidos_amba)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 3 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -59.05579 ymin: -34.91331 xmax: -58.27953 ymax: -34.26732
## CRS:            4326
##       nombre provincia area_km2                       geometry
## 1 Avellaneda       GBA    57.25 MULTIPOLYGON (((-58.33444 -...
## 2      Tigre       GBA   381.99 MULTIPOLYGON (((-58.5167 -3...
## 3      Pilar       GBA   382.95 MULTIPOLYGON (((-58.90312 -...
## 4     Moreno       GBA   186.36 MULTIPOLYGON (((-58.82401 -...
## 5      Merlo       GBA   173.97 MULTIPOLYGON (((-58.72917 -...
## 6 La Matanza       GBA   328.26 MULTIPOLYGON (((-58.52885 -...</code></pre>
<p>Las primeras 3 columnas presentan el nombre del partido, la provincia y el área en km2. Hasta acá son datos muy similares a las que ya veníamos encontrando en los dataset tradicionales; sin embargo, aparece una 4ta columna llamada “geometry” que hasta ahora no la habíamos visto y es donde se aloja la geometría de cada uno de los registros. La información de este campo es la que hace que el dataset sea espacial.</p>
<p>Si queda alguna duda, podemos utilizar la función <code>class()</code> para ver con que tipo de datos estamos trabajando:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="información-geográfica-y-mapas.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datos_amba)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>Tal como lo imaginábamos, datos_amba es un simple dataframe.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="información-geográfica-y-mapas.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(partidos_amba)</span></code></pre></div>
<pre><code>## [1] &quot;sf&quot;         &quot;data.frame&quot;</code></pre>
<p>Pero partidos_amba, es un dataset espacial u objeto del tipo “sf”, que hace referencia a “simple features” por estar compuesto de geometrías bidimensionales (polígono, punto, línea, multipunto, multilínea, etc.).</p>
<p>Para poder visualizar toda esta información plasmada en un mapa vamos a utilizar nuevamente <code>ggplot()</code> pero como en esta oportunidad queremos sumar capas geográficas (sf) trabajaremos con <code>geom_sf()</code>. Veamos un ejemplo:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="información-geográfica-y-mapas.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(partidos_amba)<span class="sc">+</span></span>
<span id="cb166-2"><a href="información-geográfica-y-mapas.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-109-1.png" width="1050" /></p>
<p>Como habrán notado, la lógica en la estructura del chunk que utilizamos para hacer este mapa es la misma del capítulo anterior, donde dentro del ggplot() asignamos el dataset y luego sumamos la capa a graficar/mapear (en este caso un objeto sf).</p>
<p>En el mapa podemos ver como las geometrías de cada registro del dataset espacial son polígonos que representan los partidos de AMBA. Probemos agregar algún atributo estético <code>aes()</code>:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="información-geográfica-y-mapas.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(partidos_amba)<span class="sc">+</span></span>
<span id="cb167-2"><a href="información-geográfica-y-mapas.html#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>area_km2))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-110-1.png" width="1050" /></p>
<p>Ya tenemos nuestro primer <strong>mapa coroplético</strong>. Probemos ajustando algunas cuestiones estéticas: cambiemos la paleta (y su escala) y el color del borde de los polígonos.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="información-geográfica-y-mapas.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(partidos_amba)<span class="sc">+</span></span>
<span id="cb168-2"><a href="información-geográfica-y-mapas.html#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>area_km2), <span class="at">color=</span><span class="st">&quot;white&quot;</span>)<span class="sc">+</span></span>
<span id="cb168-3"><a href="información-geográfica-y-mapas.html#cb168-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">250</span>,<span class="dv">500</span>,<span class="dv">750</span>,<span class="dv">1000</span>))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-111-1.png" width="1050" /></p>
<p>Y ahora si queremos visualizar en un mismo mapa el dataset espacial (partidos_amba) y el dataset tradicional (datos_amba) tenemos que tener en cuenta 2 cosas:</p>
<ol style="list-style-type: decimal">
<li><p>Cuando utilizamos 2 capas (en este caso <code>geom_sf()</code> y <code>geom_point()</code>), tenemos que asignarle a cada una el dataset dentro de la capa y <code>ggplot()</code> queda “vacío”.</p></li>
<li><p>Las capas se grafican en el mismo orden que se escribe el código, es decir que la que agregamos primero (en este caso partidos_amba) será el fondo de la que agreguemos luego (datos_amba).</p></li>
</ol>
<p>Veamos esto en detalle:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="información-geográfica-y-mapas.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb169-2"><a href="información-geográfica-y-mapas.html#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>partidos_amba)<span class="sc">+</span></span>
<span id="cb169-3"><a href="información-geográfica-y-mapas.html#cb169-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>datos_amba, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat, <span class="at">color=</span>provincia))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-112-1.png" width="1050" /></p>
<p>En el mapa anterior hay tantos puntos que nos resulta muy difícil poder encontrar patrones que nos permitan entender donde se concentran más cantidad de puntos y donde menos. En estos casos podemos recurrir a los <strong>mapas de densidad de puntos</strong> que nos ayudarán a encontrar los “hot spots”.</p>
<p>En R hay varias formas de mapear esto, pero hoy optaremos por <code>geom_bin2d()</code>, que divide el plano en una grilla y cuenta la cantidad de puntos que aparecen en cada celda.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="información-geográfica-y-mapas.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb170-2"><a href="información-geográfica-y-mapas.html#cb170-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>partidos_amba)<span class="sc">+</span></span>
<span id="cb170-3"><a href="información-geográfica-y-mapas.html#cb170-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>(<span class="at">data =</span> datos_amba, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-113-1.png" width="1050" /></p>
<p>Ahora si nos encontramos con un hot spot que antes no veíamos. Se ve muy claro como en Palermo se concentran la mayor cantidad de propiedades publicadas en Junio y Julio en Properati. Pero, ¿Existirá una diferencia entre los 2 meses? Respondamos esto con un facetado por created_on:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="información-geográfica-y-mapas.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb171-2"><a href="información-geográfica-y-mapas.html#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>partidos_amba)<span class="sc">+</span></span>
<span id="cb171-3"><a href="información-geográfica-y-mapas.html#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>(<span class="at">data =</span> datos_amba, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat))<span class="sc">+</span></span>
<span id="cb171-4"><a href="información-geográfica-y-mapas.html#cb171-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>created_on)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-114-1.png" width="1050" /></p>
<p>Claramente los patrones de ambos meses son muy parecidos, así que mantengamos un único mapa pero cambiemos el color y el tamaño de los bins (celdas):</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="información-geográfica-y-mapas.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb172-2"><a href="información-geográfica-y-mapas.html#cb172-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>partidos_amba)<span class="sc">+</span></span>
<span id="cb172-3"><a href="información-geográfica-y-mapas.html#cb172-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>(<span class="at">data =</span> datos_amba, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat), <span class="at">alpha=</span><span class="fl">0.75</span>, <span class="at">bins=</span><span class="dv">50</span>)<span class="sc">+</span></span>
<span id="cb172-4"><a href="información-geográfica-y-mapas.html#cb172-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-115-1.png" width="1050" /></p>
<p>¿Y cómo hacemos si queremos ver este mapa con un “zoom” solo de CABA?</p>
<p>Tenemos que filtrar ambas capas así:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="información-geográfica-y-mapas.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb173-2"><a href="información-geográfica-y-mapas.html#cb173-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">filter</span>(partidos_amba, provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span>))<span class="sc">+</span></span>
<span id="cb173-3"><a href="información-geográfica-y-mapas.html#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>(<span class="at">data =</span> <span class="fu">filter</span>(datos_amba, provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span>), <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat), <span class="at">alpha=</span><span class="fl">0.75</span>)<span class="sc">+</span></span>
<span id="cb173-4"><a href="información-geográfica-y-mapas.html#cb173-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-116-1.png" width="1050" /></p>
<p>Viendo el mapa anterior nos cambia un poco la percepción y ya no parecería ser solo la Comuna 14 la que tiene la mayor densidad de propiedades, sino que se ve una zona con gran densidad en la Comuna 15 (por Villa Crespo).</p>
<p>Pero bueno, a pesar de haber llegado a un mapa que nos permitió sacar muchas conclusiones, aún estamos trabajando con 2 dataset separados que no se han unido. ¡Veamos como cruzar y unificar todos estos datos!</p>
</div>
<div id="cruzar-datos-tradicionales-y-espaciales" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Cruzar datos tradicionales y espaciales</h2>
<p>Es muy común que a la hora de trabajar con datos no encontremos toda la información que necesitamos en un solo dataset. Frente a esto, lo que se hace es unir/cruzar datos provenientes de diferentes fuentes de información. En este apartado veremos como realizar estos cruces entre datos tradicionales y espaciales.</p>
<p>Para poder unir 2 set de datos ambos tienen que tener algo en común (alguna columna como por ejemplo un ID), sino sería imposible que R entienda que tiene que unir con qué. Por lo tanto, antes de unirlos deberemos manipularlos y realizarles diferentes tipos de transformaciones que nos permitan llegar a generar esta variable en común.</p>
<p>Por ejemplo en nuestro caso, si queremos unir algún dato a nuestro dataset espacial de partidos, deberíamos tener un valor único por cada nombre de partido (que funciona como el ID de mi dataset espacial).</p>
<p>Trabajemos con las propiedades en venta y manipulemos un poco el dataset tradicional para que podamos unirlos:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="información-geográfica-y-mapas.html#cb174-1" aria-hidden="true" tabindex="-1"></a>datos_amba_venta <span class="ot">&lt;-</span> datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb174-2"><a href="información-geográfica-y-mapas.html#cb174-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb174-3"><a href="información-geográfica-y-mapas.html#cb174-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(partido) <span class="sc">%&gt;%</span></span>
<span id="cb174-4"><a href="información-geográfica-y-mapas.html#cb174-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cantidad=</span><span class="fu">n</span>(),</span>
<span id="cb174-5"><a href="información-geográfica-y-mapas.html#cb174-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">valor_m2=</span><span class="fu">mean</span>(price<span class="sc">/</span>surface_covered))</span></code></pre></div>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="información-geográfica-y-mapas.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_amba_venta)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   partido         cantidad valor_m2
##   &lt;fct&gt;              &lt;int&gt;    &lt;dbl&gt;
## 1 Almirante Brown       24    1824.
## 2 Avellaneda            67    1487.
## 3 Berazategui           47    1787.
## 4 Berisso                3     952.
## 5 Cañuelas               3    1293.
## 6 Comuna 1             542    3526.</code></pre>
<p>Bien, ahora que tenemos un dataset de 50 observaciones/registros (partidos) donde para cada partido hay 2 columnas con valores asociados (cantidad y valor del m2), ya estamos en condiciones de hacer una unión con el dataset espacial.</p>
<p>Para esto utilizaremos la función <code>left_join()</code>:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="información-geográfica-y-mapas.html#cb177-1" aria-hidden="true" tabindex="-1"></a>partidos_amba <span class="ot">&lt;-</span> <span class="fu">left_join</span>(partidos_amba, datos_amba_venta, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;nombre&quot;</span><span class="ot">=</span><span class="st">&quot;partido&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="información-geográfica-y-mapas.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(partidos_amba)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 5 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -59.05579 ymin: -34.91331 xmax: -58.27953 ymax: -34.26732
## CRS:            4326
##       nombre provincia area_km2 cantidad valor_m2                       geometry
## 1 Avellaneda       GBA    57.25       67 1486.522 MULTIPOLYGON (((-58.33444 -...
## 2      Tigre       GBA   381.99      887 2674.501 MULTIPOLYGON (((-58.5167 -3...
## 3      Pilar       GBA   382.95      493 1680.706 MULTIPOLYGON (((-58.90312 -...
## 4     Moreno       GBA   186.36       64 1202.036 MULTIPOLYGON (((-58.82401 -...
## 5      Merlo       GBA   173.97       83 1146.151 MULTIPOLYGON (((-58.72917 -...
## 6 La Matanza       GBA   328.26      110 1592.995 MULTIPOLYGON (((-58.52885 -...</code></pre>
<p>Tal como esperábamos, se agregaron 2 nuevas columnas: cantidad y valor_m2.</p>
<p>Veamos esto en un mapa:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="información-geográfica-y-mapas.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(partidos_amba)<span class="sc">+</span></span>
<span id="cb180-2"><a href="información-geográfica-y-mapas.html#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>valor_m2))<span class="sc">+</span></span>
<span id="cb180-3"><a href="información-geográfica-y-mapas.html#cb180-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Spectral&quot;</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-121-1.png" width="1050" /></p>
<p>Al igual que en los gráficos, en los mapas pueden agregarse etiquetas (título, subtítulo, etc) y cambiar el aspecto (theme):</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="información-geográfica-y-mapas.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb181-2"><a href="información-geográfica-y-mapas.html#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>partidos_amba, <span class="fu">aes</span>(<span class="at">fill=</span>valor_m2), <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb181-3"><a href="información-geográfica-y-mapas.html#cb181-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Valor del m2 en Venta por Partido&quot;</span>,</span>
<span id="cb181-4"><a href="información-geográfica-y-mapas.html#cb181-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;AMBA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb181-5"><a href="información-geográfica-y-mapas.html#cb181-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;USD/m2&quot;</span>,</span>
<span id="cb181-6"><a href="información-geográfica-y-mapas.html#cb181-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-7"><a href="información-geográfica-y-mapas.html#cb181-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-8"><a href="información-geográfica-y-mapas.html#cb181-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-122-1.png" width="1050" /></p>
<p>Ahora mapiemos la otra nueva variable: cantidad de propiedades publicadas para venta.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="información-geográfica-y-mapas.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb182-2"><a href="información-geográfica-y-mapas.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>partidos_amba, <span class="fu">aes</span>(<span class="at">fill=</span>cantidad), <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb182-3"><a href="información-geográfica-y-mapas.html#cb182-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Cantidad de publicaciones de Venta por Partido&quot;</span>,</span>
<span id="cb182-4"><a href="información-geográfica-y-mapas.html#cb182-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;AMBA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb182-5"><a href="información-geográfica-y-mapas.html#cb182-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;Cantidad&quot;</span>,</span>
<span id="cb182-6"><a href="información-geográfica-y-mapas.html#cb182-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb182-7"><a href="información-geográfica-y-mapas.html#cb182-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span></span>
<span id="cb182-8"><a href="información-geográfica-y-mapas.html#cb182-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-123-1.png" width="1050" /></p>
<p>En el mapa se ve como la Comuna 14 tiene el valor más alto, sin embargo, para que estos datos sean comparables entre todos los partidos, es necesario que calculemos una densidad relacionando la cantidad de propiedades y la superficie (km2) de cada uno:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="información-geográfica-y-mapas.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb183-2"><a href="información-geográfica-y-mapas.html#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>partidos_amba, <span class="fu">aes</span>(<span class="at">fill=</span>cantidad<span class="sc">/</span>area_km2), <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb183-3"><a href="información-geográfica-y-mapas.html#cb183-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Densidad de publicaciones de Venta por Partido&quot;</span>,</span>
<span id="cb183-4"><a href="información-geográfica-y-mapas.html#cb183-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;AMBA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb183-5"><a href="información-geográfica-y-mapas.html#cb183-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;Densidad&quot;</span>,</span>
<span id="cb183-6"><a href="información-geográfica-y-mapas.html#cb183-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-7"><a href="información-geográfica-y-mapas.html#cb183-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-8"><a href="información-geográfica-y-mapas.html#cb183-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-124-1.png" width="1050" /></p>
<p>El mapa cambia bastante, ahora todos los partidos de AMBA son color azul, es decir que tienen baja densidad y los de CABA se ven coloreados. Hagamos un zoom en CABA y veamos esto en detalle:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="información-geográfica-y-mapas.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb184-2"><a href="información-geográfica-y-mapas.html#cb184-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">filter</span>(partidos_amba, provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span>), <span class="fu">aes</span>(<span class="at">fill=</span>cantidad<span class="sc">/</span>area_km2), <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb184-3"><a href="información-geográfica-y-mapas.html#cb184-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Densidad de publicaciones de Venta por Comuna&quot;</span>,</span>
<span id="cb184-4"><a href="información-geográfica-y-mapas.html#cb184-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;CABA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb184-5"><a href="información-geográfica-y-mapas.html#cb184-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;Densidad&quot;</span>,</span>
<span id="cb184-6"><a href="información-geográfica-y-mapas.html#cb184-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-7"><a href="información-geográfica-y-mapas.html#cb184-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-8"><a href="información-geográfica-y-mapas.html#cb184-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-125-1.png" width="1050" /></p>
<p>Podemos ver que aparece la Comuna 5 como la más densa seguida por la 14 y la 5. Sin embargo hay varias que tienen una densidad mayor a 50 publicaciones por km2. Veamos cuáles son:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="información-geográfica-y-mapas.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb185-2"><a href="información-geográfica-y-mapas.html#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">filter</span>(partidos_amba, provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span> <span class="sc">&amp;</span> cantidad<span class="sc">/</span>area_km2<span class="sc">&gt;=</span><span class="dv">50</span>), <span class="fu">aes</span>(<span class="at">fill=</span>cantidad<span class="sc">/</span>area_km2), <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb185-3"><a href="información-geográfica-y-mapas.html#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_label</span>(<span class="at">data=</span><span class="fu">filter</span>(partidos_amba, provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span> <span class="sc">&amp;</span> cantidad<span class="sc">/</span>area_km2<span class="sc">&gt;=</span><span class="dv">50</span>), <span class="fu">aes</span>(<span class="at">label =</span> nombre), <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb185-4"><a href="información-geográfica-y-mapas.html#cb185-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Comunas con más de 50 publicaciones por km2&quot;</span>,</span>
<span id="cb185-5"><a href="información-geográfica-y-mapas.html#cb185-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;CABA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb185-6"><a href="información-geográfica-y-mapas.html#cb185-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;Densidad&quot;</span>,</span>
<span id="cb185-7"><a href="información-geográfica-y-mapas.html#cb185-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb185-8"><a href="información-geográfica-y-mapas.html#cb185-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span></span>
<span id="cb185-9"><a href="información-geográfica-y-mapas.html#cb185-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-126-1.png" width="1050" /></p>
<p>Y por último agreguémosle el mapa de fondo así las comunas no quedan flotando:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="información-geográfica-y-mapas.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb186-2"><a href="información-geográfica-y-mapas.html#cb186-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">filter</span>(partidos_amba, provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span>)) <span class="sc">+</span></span>
<span id="cb186-3"><a href="información-geográfica-y-mapas.html#cb186-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">filter</span>(partidos_amba, provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span> <span class="sc">&amp;</span> cantidad<span class="sc">/</span>area_km2<span class="sc">&gt;=</span><span class="dv">50</span>), <span class="fu">aes</span>(<span class="at">fill=</span>cantidad<span class="sc">/</span>area_km2)) <span class="sc">+</span></span>
<span id="cb186-4"><a href="información-geográfica-y-mapas.html#cb186-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_label</span>(<span class="at">data=</span><span class="fu">filter</span>(partidos_amba, provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span> <span class="sc">&amp;</span> cantidad<span class="sc">/</span>area_km2<span class="sc">&gt;=</span><span class="dv">50</span>), <span class="fu">aes</span>(<span class="at">label =</span> nombre), <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb186-5"><a href="información-geográfica-y-mapas.html#cb186-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Cantidad de publicaciones de Venta por Comuna&quot;</span>,</span>
<span id="cb186-6"><a href="información-geográfica-y-mapas.html#cb186-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;CABA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb186-7"><a href="información-geográfica-y-mapas.html#cb186-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;Cantidad&quot;</span>,</span>
<span id="cb186-8"><a href="información-geográfica-y-mapas.html#cb186-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">x=</span><span class="st">&quot;&quot;</span>,</span>
<span id="cb186-9"><a href="información-geográfica-y-mapas.html#cb186-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">y=</span><span class="st">&quot;&quot;</span>,</span>
<span id="cb186-10"><a href="información-geográfica-y-mapas.html#cb186-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-11"><a href="información-geográfica-y-mapas.html#cb186-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Spectral&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-12"><a href="información-geográfica-y-mapas.html#cb186-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-127-1.png" width="1050" /></p>
<p><strong>Variables Categóricas en el Mapa</strong></p>
<p>Hasta acá todos los mapas que desarrollamos tomaron color a partir de una variable numérica (cantidad o valor del m2), pero ¿Qué pasa si lo que queremos mapear es una variable categórica, cómo por ejemplo la tipología que más aparece publicada por partido?</p>
<p>Para resolver esta incógnita debemos generar una nueva variable que contenga la información y pueda unirse a nuestro dataset espacial partidos_amba:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="información-geográfica-y-mapas.html#cb187-1" aria-hidden="true" tabindex="-1"></a>datos_amba_tipologia <span class="ot">&lt;-</span> datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb187-2"><a href="información-geográfica-y-mapas.html#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(partido, property_type) <span class="sc">%&gt;%</span></span>
<span id="cb187-3"><a href="información-geográfica-y-mapas.html#cb187-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cant_max=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb187-4"><a href="información-geográfica-y-mapas.html#cb187-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cant_max<span class="sc">==</span><span class="fu">max</span>(cant_max))</span></code></pre></div>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="información-geográfica-y-mapas.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_amba_tipologia)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
## # Groups:   partido [6]
##   partido         property_type cant_max
##   &lt;fct&gt;           &lt;fct&gt;            &lt;int&gt;
## 1 Almirante Brown Casa                19
## 2 Avellaneda      Departamento        47
## 3 Berazategui     Departamento        35
## 4 Berisso         Casa                 3
## 5 Cañuelas        Casa                 3
## 6 Comuna 1        Departamento       739</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="información-geográfica-y-mapas.html#cb190-1" aria-hidden="true" tabindex="-1"></a>partidos_amba <span class="ot">&lt;-</span> partidos_amba <span class="sc">%&gt;%</span></span>
<span id="cb190-2"><a href="información-geográfica-y-mapas.html#cb190-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(datos_amba_tipologia, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;nombre&quot;</span><span class="ot">=</span><span class="st">&quot;partido&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="información-geográfica-y-mapas.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(partidos_amba)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 7 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -59.05579 ymin: -34.91331 xmax: -58.27953 ymax: -34.26732
## CRS:            4326
##       nombre provincia area_km2 cantidad valor_m2 property_type cant_max
## 1 Avellaneda       GBA    57.25       67 1486.522  Departamento       47
## 2      Tigre       GBA   381.99      887 2674.501  Departamento      898
## 3      Pilar       GBA   382.95      493 1680.706          Casa      353
## 4     Moreno       GBA   186.36       64 1202.036          Casa       50
## 5      Merlo       GBA   173.97       83 1146.151          Casa       54
## 6 La Matanza       GBA   328.26      110 1592.995  Departamento       73
##                         geometry
## 1 MULTIPOLYGON (((-58.33444 -...
## 2 MULTIPOLYGON (((-58.5167 -3...
## 3 MULTIPOLYGON (((-58.90312 -...
## 4 MULTIPOLYGON (((-58.82401 -...
## 5 MULTIPOLYGON (((-58.72917 -...
## 6 MULTIPOLYGON (((-58.52885 -...</code></pre>
<p>Efectivamente, se sumaron 2 nuevas columnas: property_type y cant_max. Ahora si, mapiemos por la tipología que más aparece:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="información-geográfica-y-mapas.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(partidos_amba)<span class="sc">+</span></span>
<span id="cb193-2"><a href="información-geográfica-y-mapas.html#cb193-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>property_type))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-132-1.png" width="1050" /></p>
<p>Y modifiquemos su estética como ya aprendimos:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="información-geográfica-y-mapas.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(partidos_amba)<span class="sc">+</span></span>
<span id="cb194-2"><a href="información-geográfica-y-mapas.html#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>property_type), <span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb194-3"><a href="información-geográfica-y-mapas.html#cb194-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Tipología que predomina en las publicaciones por Partido&quot;</span>,</span>
<span id="cb194-4"><a href="información-geográfica-y-mapas.html#cb194-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;AMBA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb194-5"><a href="información-geográfica-y-mapas.html#cb194-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;Tipología&quot;</span>,</span>
<span id="cb194-6"><a href="información-geográfica-y-mapas.html#cb194-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb194-7"><a href="información-geográfica-y-mapas.html#cb194-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;darkseagreen1&quot;</span>, <span class="st">&quot;cyan4&quot;</span>))<span class="sc">+</span></span>
<span id="cb194-8"><a href="información-geográfica-y-mapas.html#cb194-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-133-1.png" width="1050" /></p>
</div>
<div id="cruzar-datos-espaciales" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Cruzar datos espaciales</h2>
<p>Muchas veces nos vamos a encontrar con que queremos unir 2 dataset pero no tienen columnas en común y es imposible generarlas; pero hay <strong>algo que si tienen en común y que nos permitirá unirlos: la ubicación en el espacio</strong>. A esto nos referimos cuando hablamos de “Spatial Join” o “Unión Espacial” y en R lo haremos a partir de la función <code>st_join()</code> que forma parte del paquete <code>sf</code>.</p>
<p>Pero antes de seguir, nos está faltando un segundo dataset espacial ya que hasta ahora solo tenemos uno. Como primer paso vamos a tener que transformar nuestro dataset tradicional “datos_amba” a un dataset espacial utilizando la función <code>st_as_sf()</code> de la siguiente forma:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="información-geográfica-y-mapas.html#cb195-1" aria-hidden="true" tabindex="-1"></a>datos_amba_geo <span class="ot">&lt;-</span> datos_amba <span class="sc">%&gt;%</span> </span>
<span id="cb195-2"><a href="información-geográfica-y-mapas.html#cb195-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>), <span class="at">crs =</span> <span class="dv">4326</span>)</span></code></pre></div>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="información-geográfica-y-mapas.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_amba_geo)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 11 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -58.52914 ymin: -34.66253 xmax: -58.3609 ymax: -34.53344
## CRS:            EPSG:4326
##   created_on provincia       partido rooms surface_total surface_covered price currency
## 1     202006      CABA      Comuna 7     1            40              37 22500      ARS
## 2     202006      CABA     Comuna 13     1            30              30 18000      ARS
## 3     202006      CABA     Comuna 13     1            31              29 17900      ARS
## 4     202006      CABA      Comuna 1     1            35              35 42000      ARS
## 5     202006       GBA Vicente López     1            36              27 19000      ARS
## 6     202006       GBA    La Matanza     2            24              24 12000      ARS
##                                                                           title
## 1                                                         Departamento - Flores
## 2                         Retasado! Monoambiente en Nuñez, excelente ubicación!
## 3                                                       Departamento - Belgrano
## 4                              Monoambiente con cochera. Zencity. Puerto Madero
## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa
## 6                                                        PH - Lomas Del Mirador
##   property_type operation_type                    geometry
## 1  Departamento       Alquiler POINT (-58.46222 -34.61917)
## 2  Departamento       Alquiler  POINT (-58.46652 -34.5546)
## 3  Departamento       Alquiler POINT (-58.46461 -34.56318)
## 4  Departamento       Alquiler  POINT (-58.3609 -34.61836)
## 5  Departamento       Alquiler POINT (-58.49345 -34.53344)
## 6            PH       Alquiler POINT (-58.52914 -34.66253)</code></pre>
<p>Ahora si, nuestro dataset datos_amba se transformó en espacial y eso lo vemos con el reemplazo de sus columnas X e Y por una única columna llamada “geometry”. Hagamos un mapa y veamos que pasa:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="información-geográfica-y-mapas.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba_geo)<span class="sc">+</span></span>
<span id="cb198-2"><a href="información-geográfica-y-mapas.html#cb198-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-136-1.png" width="1050" /></p>
<p>A simple vista son iguales que cuando hicimos el <code>geom_point()</code> pero la diferencia es que ahora son espaciales y ya estamos en condiciones de unirlos con otro dataset espacial. En este caso, como queremos generar información nueva, vamos a unirlos con un SHP que contenga información nueva que nuestros datos no tienen como por ejemplo los barrios de CABA a los que corresponde cada publicación.</p>
<p>Para esto vamos a descargar el SHP de <a href="https://data.world/angie-scetta/barrios-caba" class="uri">https://data.world/angie-scetta/barrios-caba</a>, guardarlo en la carpeta “data” y luego cargarlo de la siguiente forma:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="información-geográfica-y-mapas.html#cb199-1" aria-hidden="true" tabindex="-1"></a>barrios_caba <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;data/barrios_caba.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `barrios_caba&#39; from data source `E:\03-OTROS\SCA-CURSOS-2020\sca-big-data-urbana\data\barrios_caba.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 48 features and 1 field
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: -58.53152 ymin: -34.70529 xmax: -58.33515 ymax: -34.52649
## CRS:            4326</code></pre>
<p>Veamos los polígonos:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="información-geográfica-y-mapas.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(barrios_caba)<span class="sc">+</span></span>
<span id="cb201-2"><a href="información-geográfica-y-mapas.html#cb201-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-138-1.png" width="1050" /></p>
<p>Efectivamente tienen forma de los 48 barrios de CABA. Superpongamos los datos de Properati que convertimos en el paso anterior para ver cuanto se “solapan” con el SHP de barrios:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="información-geográfica-y-mapas.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb202-2"><a href="información-geográfica-y-mapas.html#cb202-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>barrios_caba)<span class="sc">+</span></span>
<span id="cb202-3"><a href="información-geográfica-y-mapas.html#cb202-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>datos_amba_geo, <span class="at">alpha=</span><span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-139-1.png" width="1050" /></p>
<p>Como mi SHP solo contiene los barrios de CABA, obviamente solo se solapa con los puntos que corresponden a propiedades ubicadas en CABA.</p>
<p>Ahora si, hagamos nuestra unión espacial con <code>st_join()</code> para que, cada registro de datos_amba_geo sume una nueva columna que indique a que barrio pertenece:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="información-geográfica-y-mapas.html#cb203-1" aria-hidden="true" tabindex="-1"></a>datos_caba_geo <span class="ot">&lt;-</span> <span class="fu">st_join</span>(datos_amba_geo, barrios_caba)</span></code></pre></div>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="información-geográfica-y-mapas.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_caba_geo)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 12 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -58.52914 ymin: -34.66253 xmax: -58.3609 ymax: -34.53344
## CRS:            EPSG:4326
##   created_on provincia       partido rooms surface_total surface_covered price currency
## 1     202006      CABA      Comuna 7     1            40              37 22500      ARS
## 2     202006      CABA     Comuna 13     1            30              30 18000      ARS
## 3     202006      CABA     Comuna 13     1            31              29 17900      ARS
## 4     202006      CABA      Comuna 1     1            35              35 42000      ARS
## 5     202006       GBA Vicente López     1            36              27 19000      ARS
## 6     202006       GBA    La Matanza     2            24              24 12000      ARS
##                                                                           title
## 1                                                         Departamento - Flores
## 2                         Retasado! Monoambiente en Nuñez, excelente ubicación!
## 3                                                       Departamento - Belgrano
## 4                              Monoambiente con cochera. Zencity. Puerto Madero
## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa
## 6                                                        PH - Lomas Del Mirador
##   property_type operation_type        BARRIO                    geometry
## 1  Departamento       Alquiler        FLORES POINT (-58.46222 -34.61917)
## 2  Departamento       Alquiler         NUÑEZ  POINT (-58.46652 -34.5546)
## 3  Departamento       Alquiler      BELGRANO POINT (-58.46461 -34.56318)
## 4  Departamento       Alquiler PUERTO MADERO  POINT (-58.3609 -34.61836)
## 5  Departamento       Alquiler          &lt;NA&gt; POINT (-58.49345 -34.53344)
## 6            PH       Alquiler          &lt;NA&gt; POINT (-58.52914 -34.66253)</code></pre>
<p>Como verán, a cada registro se le unió una columna con el nombre del barrio con el que solapan, y a aquellas propiedades ubicadas fuera de CABA se les asignó un valor nulo o NA. Veamos esto en un mapa:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="información-geográfica-y-mapas.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb206-2"><a href="información-geográfica-y-mapas.html#cb206-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>barrios_caba)<span class="sc">+</span></span>
<span id="cb206-3"><a href="información-geográfica-y-mapas.html#cb206-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>datos_caba_geo, <span class="fu">aes</span>(<span class="at">color=</span>BARRIO), <span class="at">alpha=</span><span class="fl">0.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-142-1.png" width="1050" /></p>
<p>Se ve como todos los puntos que se ubican en CABA tienen color según sus barrios, pero los puntos fuera de CABA quedaron grises porque su valor es NA. Para “limpiar” esto filtremos todos los registros que tienen barrio asignado:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="información-geográfica-y-mapas.html#cb207-1" aria-hidden="true" tabindex="-1"></a>datos_caba_geo <span class="ot">&lt;-</span> datos_caba_geo <span class="sc">%&gt;%</span></span>
<span id="cb207-2"><a href="información-geográfica-y-mapas.html#cb207-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(BARRIO))</span></code></pre></div>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="información-geográfica-y-mapas.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb208-2"><a href="información-geográfica-y-mapas.html#cb208-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>barrios_caba)<span class="sc">+</span></span>
<span id="cb208-3"><a href="información-geográfica-y-mapas.html#cb208-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>datos_caba_geo, <span class="fu">aes</span>(<span class="at">color=</span>BARRIO), <span class="at">alpha=</span><span class="fl">0.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-144-1.png" width="1050" /></p>
<p>Ya tenemos solo los registros de CABA. ¿Y ahora cómo hacemos si queremos realizar un mapa coroplético como los anteriores pero coloreando los barrios según valor del m2? Nuevamente manipulamos el set de datos con <code>group_by()</code> y luego utilizamos <code>left_join()</code>:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="información-geográfica-y-mapas.html#cb209-1" aria-hidden="true" tabindex="-1"></a>datos_caba_geo <span class="ot">&lt;-</span> datos_caba_geo <span class="sc">%&gt;%</span></span>
<span id="cb209-2"><a href="información-geográfica-y-mapas.html#cb209-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(BARRIO, operation_type) <span class="sc">%&gt;%</span></span>
<span id="cb209-3"><a href="información-geográfica-y-mapas.html#cb209-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">valor_m2=</span><span class="fu">mean</span>(price<span class="sc">/</span>surface_covered))</span></code></pre></div>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="información-geográfica-y-mapas.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_caba_geo)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 3 fields
## geometry type:  MULTIPOINT
## dimension:      XY
## bbox:           xmin: -58.50249 ymin: -34.62174 xmax: -58.39217 ymax: -34.58573
## CRS:            EPSG:4326
## # A tibble: 6 x 4
## # Groups:   BARRIO [3]
##   BARRIO   operation_type valor_m2                                                 geometry
##   &lt;fct&gt;    &lt;fct&gt;             &lt;dbl&gt;                                         &lt;MULTIPOINT [°]&gt;
## 1 AGRONOM~ Alquiler           471. ((-58.50249 -34.59347), (-58.49966 -34.59564), (-58.495~
## 2 AGRONOM~ Venta             2869. ((-58.49994 -34.59319), (-58.49984 -34.59559), (-58.499~
## 3 ALMAGRO  Alquiler           488. ((-58.43224 -34.60375), (-58.43216 -34.60207), (-58.431~
## 4 ALMAGRO  Venta             2714. ((-58.43277 -34.60322), (-58.43229 -34.60277), (-58.431~
## 5 BALVANE~ Alquiler           478. ((-58.4128 -34.6028), (-58.41252 -34.60927), (-58.4118 ~
## 6 BALVANE~ Venta             2211. ((-58.41409 -34.61113), (-58.41314 -34.61122), (-58.412~</code></pre>
<p>Pero como vimos al principio de la clase, si usamos <code>left_join()</code>, uno de los dataset no tiene que ser espacial. Para esto, transformemos nuestro dataset espacial data_caba_geo a un dataset tradicional, quitándole la geometría con <code>st_set_geometry()</code>:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="información-geográfica-y-mapas.html#cb212-1" aria-hidden="true" tabindex="-1"></a>datos_caba_geo <span class="ot">&lt;-</span> datos_caba_geo <span class="sc">%&gt;%</span></span>
<span id="cb212-2"><a href="información-geográfica-y-mapas.html#cb212-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_set_geometry</span>(<span class="cn">NULL</span>)</span></code></pre></div>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="información-geográfica-y-mapas.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_caba_geo)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
## # Groups:   BARRIO [3]
##   BARRIO    operation_type valor_m2
##   &lt;fct&gt;     &lt;fct&gt;             &lt;dbl&gt;
## 1 AGRONOMIA Alquiler           471.
## 2 AGRONOMIA Venta             2869.
## 3 ALMAGRO   Alquiler           488.
## 4 ALMAGRO   Venta             2714.
## 5 BALVANERA Alquiler           478.
## 6 BALVANERA Venta             2211.</code></pre>
<p>Ahora si, solo tiene 3 columnas con el nombre del barrio, la operación inmobiliaria y el valor del m2 pero ya no tiene geometría. Procedamos a realizar la unión:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="información-geográfica-y-mapas.html#cb215-1" aria-hidden="true" tabindex="-1"></a>barrios_caba <span class="ot">&lt;-</span> <span class="fu">left_join</span>(barrios_caba, datos_caba_geo, <span class="at">by=</span><span class="st">&quot;BARRIO&quot;</span>)</span></code></pre></div>
<p>Y a mapear el valor de Venta:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="información-geográfica-y-mapas.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb216-2"><a href="información-geográfica-y-mapas.html#cb216-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">filter</span>(barrios_caba, operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span>), <span class="fu">aes</span>(<span class="at">fill=</span>valor_m2))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-150-1.png" width="1050" /></p>
<p>Ya tenemos un mapa de valor del m2 en Venta por Barrio, y como siempre Puerto Madero presenta el valor más alto. Mejoremos su estética:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="información-geográfica-y-mapas.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb217-2"><a href="información-geográfica-y-mapas.html#cb217-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">filter</span>(barrios_caba, operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span>), <span class="fu">aes</span>(<span class="at">fill=</span>valor_m2), <span class="at">color=</span><span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb217-3"><a href="información-geográfica-y-mapas.html#cb217-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Valor del m2 de Venta&quot;</span>,</span>
<span id="cb217-4"><a href="información-geográfica-y-mapas.html#cb217-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;CABA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb217-5"><a href="información-geográfica-y-mapas.html#cb217-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;USD/m2&quot;</span>,</span>
<span id="cb217-6"><a href="información-geográfica-y-mapas.html#cb217-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb217-7"><a href="información-geográfica-y-mapas.html#cb217-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb217-8"><a href="información-geográfica-y-mapas.html#cb217-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-151-1.png" width="1050" /></p>
<p>Y el de valor del m2 en alquiler:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="información-geográfica-y-mapas.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb218-2"><a href="información-geográfica-y-mapas.html#cb218-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">filter</span>(barrios_caba, operation_type<span class="sc">==</span><span class="st">&quot;Alquiler&quot;</span>), <span class="fu">aes</span>(<span class="at">fill=</span>valor_m2), <span class="at">color=</span><span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb218-3"><a href="información-geográfica-y-mapas.html#cb218-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Valor del m2 de Alquiler&quot;</span>,</span>
<span id="cb218-4"><a href="información-geográfica-y-mapas.html#cb218-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;CABA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb218-5"><a href="información-geográfica-y-mapas.html#cb218-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;ARS/m2&quot;</span>,</span>
<span id="cb218-6"><a href="información-geográfica-y-mapas.html#cb218-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb218-7"><a href="información-geográfica-y-mapas.html#cb218-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb218-8"><a href="información-geográfica-y-mapas.html#cb218-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-152-1.png" width="1050" /></p>
<p>En el mapa anterior se puede observar que hay barrios en el sur de la Ciudad que directamente no tienen propiedades en alquiler.</p>
</div>
<div id="agregar-mapa-base" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Agregar mapa base</h2>
<p>Si bien hasta aquí hemos hecho mapas bastante completos, nunca está de más agregarles un fondo que nos ayude a interpretar el contexto. Para lograr esto utilizaremos la librería <code>ggmap()</code> que cómo ya sabemos, primero debemos instalarla y luego activarla:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="información-geográfica-y-mapas.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(ggmap)</span></span>
<span id="cb219-2"><a href="información-geográfica-y-mapas.html#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span></code></pre></div>
<p>Para poder obtener un mapa de fondo con ggmap, primero tengo que delimintar cuál es mi “bounding box”, que hace referencia a los límites de un cuadro en el cual se encuentran todos mis datos. Esto lo haremos de la siguiente forma:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="información-geográfica-y-mapas.html#cb220-1" aria-hidden="true" tabindex="-1"></a>bbox_barrios <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">st_bbox</span>(barrios_caba))</span></code></pre></div>
<p>Una vez que ya tenemos el bbox, vamos a usar get_stamenmap() para descargar de internet el mapa. En este caso utilizaremos un mapa de tipo “toner-lite” pero hay otras opciones que pueden verse aquí: <a href="http://maps.stamen.com/" class="uri">http://maps.stamen.com/</a></p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="información-geográfica-y-mapas.html#cb221-1" aria-hidden="true" tabindex="-1"></a>mapa_caba <span class="ot">&lt;-</span> <span class="fu">get_stamenmap</span>(<span class="at">bbox =</span> bbox_barrios,</span>
<span id="cb221-2"><a href="información-geográfica-y-mapas.html#cb221-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">maptype =</span> <span class="st">&quot;toner-lite&quot;</span>,</span>
<span id="cb221-3"><a href="información-geográfica-y-mapas.html#cb221-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">zoom=</span><span class="dv">12</span>)</span></code></pre></div>
<p>Con <code>ggmap()</code> veamos que nos hemos descargado:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="información-geográfica-y-mapas.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(mapa_caba)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-156-1.png" width="1050" /></p>
<p>Ahora podemos reutilizar el código del ejemplo de mapa del valor de m2 de venta por barrio, simplemente reemplazando la primera línea, donde inicializamos un objeto ggplot por una línea que llame a nuestro mapa base de la siguiente forma:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="información-geográfica-y-mapas.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(mapa_caba)<span class="sc">+</span></span>
<span id="cb223-2"><a href="información-geográfica-y-mapas.html#cb223-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">filter</span>(barrios_caba, operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span>), <span class="fu">aes</span>(<span class="at">fill=</span>valor_m2), <span class="at">alpha=</span><span class="fl">0.75</span>, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb223-3"><a href="información-geográfica-y-mapas.html#cb223-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Valor del m2 de Venta&quot;</span>,</span>
<span id="cb223-4"><a href="información-geográfica-y-mapas.html#cb223-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;CABA - Junio y Julio 2020&quot;</span>,</span>
<span id="cb223-5"><a href="información-geográfica-y-mapas.html#cb223-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">&quot;USD/m2&quot;</span>,</span>
<span id="cb223-6"><a href="información-geográfica-y-mapas.html#cb223-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption=</span> <span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb223-7"><a href="información-geográfica-y-mapas.html#cb223-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb223-8"><a href="información-geográfica-y-mapas.html#cb223-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-157-1.png" width="1050" /></p>
<p>Además de cambiar la primer línea de código, nótese que agregamos un inherit.aes=FALSE dentro del geom_sf() para anular la estética predeterminada del objeto ggmap.</p>
<p>Y listo! Ya tenemos un mapa con fondo y con información que generamos nosotros a partir de un cruce espacial.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="anÃ¡lisis-y-visualizaciÃ³n-de-datos.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["manual-big-data-urbana.pdf", "manual-big-data-urbana.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
