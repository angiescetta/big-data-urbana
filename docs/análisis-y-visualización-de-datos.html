<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Clase 3 ANÁLISIS Y VISUALIZACIÓN DE DATOS | 01-conocer.Rmd</title>
  <meta name="description" content="Clase 3 ANÁLISIS Y VISUALIZACIÓN DE DATOS | 01-conocer.Rmd" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Clase 3 ANÁLISIS Y VISUALIZACIÓN DE DATOS | 01-conocer.Rmd" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Clase 3 ANÁLISIS Y VISUALIZACIÓN DE DATOS | 01-conocer.Rmd" />
  
  
  

<meta name="author" content="Angie Scetta" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="manipulación-de-datos.html"/>
<link rel="next" href="información-geográfica-y-mapas.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Big Data Urbana</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>INTRODUCCIÓN</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#indice"><i class="fa fa-check"></i>Indice</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="presentación.html"><a href="presentación.html"><i class="fa fa-check"></i><b>1</b> PRESENTACIÓN</a>
<ul>
<li class="chapter" data-level="1.1" data-path="presentación.html"><a href="presentación.html#interfaz-gráfica-de-rstudio"><i class="fa fa-check"></i><b>1.1</b> Interfaz Gráfica de RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="presentación.html"><a href="presentación.html#formato-rmarkdown"><i class="fa fa-check"></i><b>1.2</b> Formato RMarkdown</a></li>
<li class="chapter" data-level="1.3" data-path="presentación.html"><a href="presentación.html#nuestro-primer-dataset"><i class="fa fa-check"></i><b>1.3</b> Nuestro primer dataset</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html"><i class="fa fa-check"></i><b>2</b> MANIPULACIÓN DE DATOS</a>
<ul>
<li class="chapter" data-level="2.1" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#filtrar-registros-que-cumplan-condiciones"><i class="fa fa-check"></i><b>2.1</b> Filtrar registros que cumplan condiciones</a></li>
<li class="chapter" data-level="2.2" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#seleccionar-columnas-de-interés"><i class="fa fa-check"></i><b>2.2</b> Seleccionar columnas de interés</a></li>
<li class="chapter" data-level="2.3" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#modificar-o-agregar-columnas"><i class="fa fa-check"></i><b>2.3</b> Modificar o agregar columnas</a></li>
<li class="chapter" data-level="2.4" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#ordenar-registros"><i class="fa fa-check"></i><b>2.4</b> Ordenar registros</a></li>
<li class="chapter" data-level="2.5" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#renombrar-columnas"><i class="fa fa-check"></i><b>2.5</b> Renombrar columnas</a></li>
<li class="chapter" data-level="2.6" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#resumir-y-agrupar-datos"><i class="fa fa-check"></i><b>2.6</b> Resumir y agrupar datos</a></li>
<li class="chapter" data-level="2.7" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#concatenar-funciones"><i class="fa fa-check"></i><b>2.7</b> Concatenar funciones (%&gt;%)</a></li>
<li class="chapter" data-level="2.8" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#transformar-la-estructura-de-los-datos"><i class="fa fa-check"></i><b>2.8</b> Transformar la estructura de los datos</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#extender-la-estructura-de-los-datos-spread"><i class="fa fa-check"></i><b>2.8.1</b> Extender la estructura de los datos: spread()</a></li>
<li class="chapter" data-level="2.8.2" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#unificar-los-datos-gather"><i class="fa fa-check"></i><b>2.8.2</b> Unificar los datos: gather()</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html"><i class="fa fa-check"></i><b>3</b> ANÁLISIS Y VISUALIZACIÓN DE DATOS</a>
<ul>
<li class="chapter" data-level="3.1" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#distribución-de-una-variable-continua"><i class="fa fa-check"></i><b>3.1</b> Distribución de una variable continua</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#histograma"><i class="fa fa-check"></i><b>3.1.1</b> Histograma</a></li>
<li class="chapter" data-level="3.1.2" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#gráfico-de-densidad"><i class="fa fa-check"></i><b>3.1.2</b> Gráfico de Densidad</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#distribución-de-valores-continuos-asociados-a-una-variable-categórica-gráfico-de-cajas"><i class="fa fa-check"></i><b>3.2</b> Distribución de valores continuos asociados a una variable categórica: Gráfico de Cajas</a></li>
<li class="chapter" data-level="3.3" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#relación-entre-variables-numéricas-gráfico-de-dispersión"><i class="fa fa-check"></i><b>3.3</b> Relación entre variables numéricas: Gráfico de Dispersión</a></li>
<li class="chapter" data-level="3.4" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#relación-entre-variables-categóricas-gráfico-de-matriz"><i class="fa fa-check"></i><b>3.4</b> Relación entre variables categóricas: Gráfico de Matriz</a></li>
<li class="chapter" data-level="3.5" data-path="análisis-y-visualización-de-datos.html"><a href="análisis-y-visualización-de-datos.html#relación-entre-variable-numérica-y-categórica-gráfico-de-barras"><i class="fa fa-check"></i><b>3.5</b> Relación entre variable numérica y categórica: Gráfico de Barras</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html"><i class="fa fa-check"></i><b>4</b> INFORMACIÓN GEOGRÁFICA Y MAPAS</a>
<ul>
<li class="chapter" data-level="4.1" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#analizar-datos-espaciales"><i class="fa fa-check"></i><b>4.1</b> Analizar datos espaciales</a></li>
<li class="chapter" data-level="4.2" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#cruzar-datos-tradicionales-y-espaciales"><i class="fa fa-check"></i><b>4.2</b> Cruzar datos tradicionales y espaciales</a></li>
<li class="chapter" data-level="4.3" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#cruzar-datos-espaciales"><i class="fa fa-check"></i><b>4.3</b> Cruzar datos espaciales</a></li>
<li class="chapter" data-level="4.4" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#agregar-mapa-base"><i class="fa fa-check"></i><b>4.4</b> Agregar mapa base</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">01-conocer.Rmd</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="análisis-y-visualización-de-datos" class="section level1" number="3">
<h1><span class="header-section-number">Clase 3</span> ANÁLISIS Y VISUALIZACIÓN DE DATOS</h1>
<p>El paquete <code>tidyverse</code> incluye diversos paquetes, entre los que se encuentra <code>ggplot2</code>, que nos permite realizar diferentes tipos de gráficos a partir de nuestros datos.</p>
<p>Hasta acá ya sabemos abrir, conocer, manipular y transformar un dataset, así que ahora nos enfocaremos en el <strong>desarrollo de visualizaciones</strong> que nos permitirán comunicar de forma gráfica lo que dicen nuestros datos.</p>
<p>En la estructura del código necesario para realizar un gráfico con <code>ggplot2</code> hay que determinar lo siguiente:</p>
<ul>
<li><strong>Dataset a utilizar</strong>: hay que indicar el dataset al inicio del código en <strong>ggplot(dataset)</strong>.</li>
<li><strong>Tipo de Gráfico</strong> a realizar: puede ser de puntos, barras, líneas, áreas, matriz, histograma, densidad, etc. Estos elementos funcionan como “capas” ya que pueden utilizarse más de uno a la vez en un mismo gráfico y sus códigos se escriben <strong>geom_hist()</strong>, <strong>geom_tile()</strong>, <strong>geom_bar()</strong>, etc.</li>
<li><strong>Atributos Estéticos</strong> que dependen de una o más columnas del dataset: variables a utilizar en ejes x e y, colores, tamaños, formas, transparencias, etc. Siempre se asignan dentro de <strong>aes()</strong>.</li>
<li><strong>Etiquetas</strong> que ayudan a la interpretación de las visualizaciones. Estas son: títulos, subtítulos, leyendas, etc. Se asignan dentro de <strong>labs()</strong>.</li>
<li><strong>Facetas</strong> a utilizar: de acuerdo a alguna columna del dataset dividen el gráfico manteniendo las escalas. Esto es opcional y se hace con <strong>facet_grid()</strong>.</li>
<li><strong>Temas</strong> que permiten elegir la estética general del gráfico (color de fondo, tamaño de márgenes, etc). Algunos son <strong>theme_void()</strong>, <strong>theme_dark()</strong>, etc.</li>
</ul>
<p>A continuación seguiremos trabajando con los datos de Properati de Junio y Julio 2020 en AMBA y desarrollaremos diferentes visualizaciones que sinteticen y comuniquen la información que contiene.</p>
<p>En particular, veremos como representar gráficamente lo siguiente:</p>
<ul>
<li>Distribución de una variable continua</li>
<li>Distribución de valores continuos asociados a una variable categórica</li>
<li>Relación entre variables continuas</li>
<li>Relación entre variables categóricas</li>
<li>Relación entre una variable continua y una categórica</li>
</ul>
<p>Empecemos activando la librería <code>tidyverse</code>:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="análisis-y-visualización-de-datos.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Y volvamos a cargar nuestro dataset:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="análisis-y-visualización-de-datos.html#cb117-1" aria-hidden="true" tabindex="-1"></a>datos_amba <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/amba_properati.csv&quot;</span>)</span></code></pre></div>
<div id="distribución-de-una-variable-continua" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Distribución de una variable continua</h2>
<div id="histograma" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Histograma</h3>
<p>Los histogramas muestran gráficamente, a partir de barras, la distribución de una variable continua, es decir la frecuencia con la que aparece cada valor numérico en una determinada columna del dataset. En el eje X se representa la variable continua y en el eje Y la frecuencia de la misma.</p>
<p>Para generar este tipo de visualización utilizaremos <code>ggplot()</code> + <code>geom_histogram()</code>. Veamos por ejemplo como se distribuyen las superficies cubiertas (surface_covered) de las propiedades publicadas:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="análisis-y-visualización-de-datos.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb118-2"><a href="análisis-y-visualización-de-datos.html#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>surface_covered))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-65-1.png" width="1050" /></p>
<p>El eje X muestra la cantidad de m2 cubiertos que tienen las propiedades publicadas y el eje Y la cantidad de veces que aparece cada superficie. Por lo tanto, podemos ver que hay muchas propiedades con “poca” superficie cubierta y pocas propiedades con “mucha” superficie cubierta.</p>
<p>Para facilitar la interpretación, podemos modificar el ancho de las barras (bins) que por defecto el valor es 30. Probemos con bins=75:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="análisis-y-visualización-de-datos.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb119-2"><a href="análisis-y-visualización-de-datos.html#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>surface_covered), <span class="at">bins=</span><span class="dv">75</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-66-1.png" width="1050" /></p>
<p>¿Notan el cambio? El eje Y disminuyó porque los conteos se agruparon en intervalos más pequeños sobre el eje X.</p>
<p>Podemos observar que hay más propiedades por debajo de los 100m2 cubiertos que por encima, y que la mayor cantidad de observaciones se ubica alrededor de los 50m2. También podemos detectar algunos outliers que tienen alrededor de 800m2.</p>
<p>Pero desagreguemos aún más nuestros datos y sumemos una variable categórica (tipo de operación) que nos permita facetar/dividir el gráfico. Para esto utilizaremos <code>facet_grid()</code>:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="análisis-y-visualización-de-datos.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb120-2"><a href="análisis-y-visualización-de-datos.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>surface_covered), <span class="at">bins=</span><span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb120-3"><a href="análisis-y-visualización-de-datos.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(operation_type<span class="sc">~</span>.)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-67-1.png" width="1050" /></p>
<p>La tendencia se mantiene similar en ambos casos, con una mayoría de propiedades de aproximadamente 50m2 cubiertos. Sin embargo, se detecta una gran diferencia en la cantidad de propiedades publicadas para cada tipo de operación.</p>
<p>Incorporemos una variable más (provincia) que nos permita comprender si los comportamientos de la variable surface_covered cambian entre CABA y PBA. En este caso la agregaremos como un color de relleno (fill):</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="análisis-y-visualización-de-datos.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb121-2"><a href="análisis-y-visualización-de-datos.html#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>surface_covered, <span class="at">fill=</span>provincia), <span class="at">bins=</span><span class="dv">75</span>)<span class="sc">+</span></span>
<span id="cb121-3"><a href="análisis-y-visualización-de-datos.html#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(operation_type<span class="sc">~</span>.)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-68-1.png" width="1050" /></p>
<p>Podemos ver que tanto en CABA como en AMBA, los comportamientos de la variable analizada son similares.</p>
<p>Por último probemos sumar una variable más dentro del facetado (fecha de publicación), agreguemos etiquetas (labs) y elijamos los colores del gráfico (scale_fill y theme).</p>
<p>Cabe destacar que hay 2 tipos de escalas de color:</p>
<ul>
<li><p>Las ya establecidas (listas para usar): Brewer, Viridis. Recomiendo utilizar estas que en <code>ggplot2</code> las van a encontrar como scale_fill_viridis_c(), scale_fill_brewer() y demás variantes.</p></li>
<li><p>Las personalizadas, donde nosotros elegimos todos los colores: Gradiente (scale_fill_gradient()), Manual (scale_fill_manual())
<em>Para obtener un listado de colores pueden ver <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">este link</a></em></p></li>
</ul>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="análisis-y-visualización-de-datos.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb122-2"><a href="análisis-y-visualización-de-datos.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>surface_covered, <span class="at">fill=</span>provincia), <span class="at">bins=</span><span class="dv">75</span>)<span class="sc">+</span></span>
<span id="cb122-3"><a href="análisis-y-visualización-de-datos.html#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(created_on<span class="sc">~</span>operation_type)<span class="sc">+</span></span>
<span id="cb122-4"><a href="análisis-y-visualización-de-datos.html#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;M2 cubiertos según Zona, Operación y Fecha de Publicación&quot;</span>,</span>
<span id="cb122-5"><a href="análisis-y-visualización-de-datos.html#cb122-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Zona&quot;</span>,</span>
<span id="cb122-6"><a href="análisis-y-visualización-de-datos.html#cb122-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Superficie cubierta (M2)&quot;</span>,</span>
<span id="cb122-7"><a href="análisis-y-visualización-de-datos.html#cb122-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Cantidad&quot;</span>,</span>
<span id="cb122-8"><a href="análisis-y-visualización-de-datos.html#cb122-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati Junio y Julio 2020&quot;</span>)<span class="sc">+</span></span>
<span id="cb122-9"><a href="análisis-y-visualización-de-datos.html#cb122-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;indianred2&quot;</span>))<span class="sc">+</span></span>
<span id="cb122-10"><a href="análisis-y-visualización-de-datos.html#cb122-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-69-1.png" width="1050" /></p>
<p>En el histograma anterior se puede ver que si bien en ambos meses las distribuciones se mantienen, en Junio hay mayor cantidad de publicaciones que en Julio.</p>
</div>
<div id="gráfico-de-densidad" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Gráfico de Densidad</h3>
<p>Este tipo de gráfico cumple la misma función que el Histograma, pero se caracteriza por generar una versión más “suavizada” en la que muestra la densidad de kernel a lo largo de toda la variable continua y no conteos por bins. Estos gráficos nos permiten ver cuales son los intervalos de la variable continua donde hay mayor probabilidad de encontrar registros.</p>
<p>Para generar esta visualización utilizaremos <code>ggplot()</code> + <code>geom_density()</code>. Veamos por ejemplo como se distribuyen los valores por m2 (price/surface_covered) de las propiedades publicadas:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="análisis-y-visualización-de-datos.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb123-2"><a href="análisis-y-visualización-de-datos.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>price<span class="sc">/</span>surface_covered))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-70-1.png" width="1050" /></p>
<p>En primer lugar, tenemos los valores del eje Y en notación científica. Si queremos evitar esto es necesario que escribamos la siguiente línea de código:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="análisis-y-visualización-de-datos.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span></code></pre></div>
<p>Y ahora si, ejecutar nuevamente el chunk anterior:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="análisis-y-visualización-de-datos.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb125-2"><a href="análisis-y-visualización-de-datos.html#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>price<span class="sc">/</span>surface_covered))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-72-1.png" width="1050" /></p>
<p>En el gráfico se ven 2 “picos” muy pronunciados que indican en que partes del intervalo se concentran los valores. Esto podría deberse a que estamos trabajando con ambos tipos de operación (Alquiler y Venta), y como todos sabemos, los valores del m2 de ambos son muy diferentes, tanto por la moneda (ARS vs USD) como por los montos.
Por lo tanto, es muy probable que cada uno de esos “picos” se corresponda al valor del m2 de cada una de las operaciones. Para poder desemascarar esto recurramos nuevamente al facetado:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="análisis-y-visualización-de-datos.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb126-2"><a href="análisis-y-visualización-de-datos.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>price<span class="sc">/</span>surface_covered), <span class="at">fill=</span><span class="st">&quot;gray&quot;</span>) <span class="sc">+</span></span>
<span id="cb126-3"><a href="análisis-y-visualización-de-datos.html#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(operation_type<span class="sc">~</span>.)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-73-1.png" width="1050" /></p>
<p>Las operaciones tienen una distribución del valor del m2 muy diferentes entre sí. Se ve muy claro que los alquileres tienen un rango de precios que va desde 300 a 500$ARS aprox mientras que las ventas distribuyen sus publicaciones a lo largo de un rango bastante mayor entre 1.500USD y 3.500USD aproximadamente.</p>
<p>Pero como los precios también deberían variar bastante de acuerdo a la zona geográfica, probemos agregar una variable categórica más que nos ayude a diferenciar CABA de GBA:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="análisis-y-visualización-de-datos.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb127-2"><a href="análisis-y-visualización-de-datos.html#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>price<span class="sc">/</span>surface_covered, <span class="at">fill=</span>provincia), <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb127-3"><a href="análisis-y-visualización-de-datos.html#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(operation_type<span class="sc">~</span>.)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-74-1.png" width="1050" /></p>
<p>Obviamente para cada partido, localidad y calle específica los valores van a variar, pero a simple vista podríamos notar que en ambos casos el valor del m2 de la mayoría de propiedades es mayor en CABA.</p>
<p>Ahora analicemos como se comporta el valor del m2 de venta según el tipo de propiedad en CABA y GBA y aprovechemos para agregar etiquetas y colores a nuestro gráfico:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="análisis-y-visualización-de-datos.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb128-2"><a href="análisis-y-visualización-de-datos.html#cb128-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span>))<span class="sc">+</span></span>
<span id="cb128-3"><a href="análisis-y-visualización-de-datos.html#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>price<span class="sc">/</span>surface_covered, <span class="at">fill=</span>provincia), <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb128-4"><a href="análisis-y-visualización-de-datos.html#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(property_type<span class="sc">~</span>.)<span class="sc">+</span></span>
<span id="cb128-5"><a href="análisis-y-visualización-de-datos.html#cb128-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Valor del m2 en Venta según Zona y Tipo de Propiedad&quot;</span>,</span>
<span id="cb128-6"><a href="análisis-y-visualización-de-datos.html#cb128-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Zona&quot;</span>,</span>
<span id="cb128-7"><a href="análisis-y-visualización-de-datos.html#cb128-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Valor m2&quot;</span>,</span>
<span id="cb128-8"><a href="análisis-y-visualización-de-datos.html#cb128-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Densidad&quot;</span>,</span>
<span id="cb128-9"><a href="análisis-y-visualización-de-datos.html#cb128-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati Junio y Julio 2020&quot;</span>)<span class="sc">+</span></span>
<span id="cb128-10"><a href="análisis-y-visualización-de-datos.html#cb128-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;indianred2&quot;</span>))<span class="sc">+</span></span>
<span id="cb128-11"><a href="análisis-y-visualización-de-datos.html#cb128-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-75-1.png" width="1050" /></p>
<p>En las 3 tipologías de vivienda los valores del m2 que predominan en CABA son mayores a los de GBA.</p>
<p>Y ahora elijamos 3 partidos para comparar:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="análisis-y-visualización-de-datos.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb129-2"><a href="análisis-y-visualización-de-datos.html#cb129-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span> <span class="sc">&amp;</span> partido<span class="sc">==</span><span class="fu">c</span>(<span class="st">&quot;Vicente López&quot;</span>, <span class="st">&quot;La Matanza&quot;</span>, <span class="st">&quot;La Plata&quot;</span>)))<span class="sc">+</span></span>
<span id="cb129-3"><a href="análisis-y-visualización-de-datos.html#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>price<span class="sc">/</span>surface_covered, <span class="at">fill=</span>partido), <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb129-4"><a href="análisis-y-visualización-de-datos.html#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(property_type<span class="sc">~</span>.)<span class="sc">+</span></span>
<span id="cb129-5"><a href="análisis-y-visualización-de-datos.html#cb129-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Valor del m2 en Venta por Partido y Tipo de Propiedad&quot;</span>,</span>
<span id="cb129-6"><a href="análisis-y-visualización-de-datos.html#cb129-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Zona&quot;</span>,</span>
<span id="cb129-7"><a href="análisis-y-visualización-de-datos.html#cb129-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Valor m2&quot;</span>,</span>
<span id="cb129-8"><a href="análisis-y-visualización-de-datos.html#cb129-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Densidad&quot;</span>,</span>
<span id="cb129-9"><a href="análisis-y-visualización-de-datos.html#cb129-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati Junio y Julio 2020&quot;</span>)<span class="sc">+</span></span>
<span id="cb129-10"><a href="análisis-y-visualización-de-datos.html#cb129-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-76-1.png" width="1050" /></p>
<p>En las 3 tipologías se ve que Vicente López tiene los precios más elevados por m2, y a su vez que los departamentos de La Matanza superan en precio a los de La Plata. Sin embargo, para casas y PHs, La Matanza y La Plata tienen precios muy similares.</p>
</div>
</div>
<div id="distribución-de-valores-continuos-asociados-a-una-variable-categórica-gráfico-de-cajas" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Distribución de valores continuos asociados a una variable categórica: Gráfico de Cajas</h2>
<p>Un Gráfico de Cajas sirve para comparar la distribución y tendencia central de varias categorías de una variable.</p>
<p>Veamos como luce un gráfico de este tipo:</p>
<p><img src="images/geom_boxplot.jpg" /></p>
<p>Para cumplir con el objetivo de analizar la distribución de una determinada muestra de datos, <strong>la visualización distribuye los datos en cuartiles: Q1, Q2 y Q3</strong>. Cabe destacar que, los cuartiles son los valores que dividen a la muestra (cantidad de registros) en 4 partes iguales.</p>
<p><strong>Q1</strong>: El primer cuartil está representado por el mayor valor incluido en el 1/4 más bajo. Es decir que, el 25% de la muestra de datos es menor que este valor.</p>
<p><strong>Q2</strong>: El segundo cuartil está representado por el mayor valor incluido en el 2/4. Es decir que, el 50% de la muestra de datos es menor que este valor. Este valor indica la <strong>mediana de la serie</strong>.</p>
<p><strong>Q3</strong>: El tercer cuartil está representado por el mayor valor incluido en el 3/4. Es decir que, el 75% de la muestra de datos es menor que este valor.</p>
<p>En este gráfico también pueden aparecer <strong>outliers</strong>, es decir valores extremos que haya dentro de los conjuntos de datos.</p>
<p>Para generar esta visualización utilizaremos <code>ggplot()</code> + <code>geom_boxplot()</code>. Veamos por ejemplo como se distribuyen los valores por m2 (price/surface_covered) por zona:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="análisis-y-visualización-de-datos.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba) <span class="sc">+</span></span>
<span id="cb130-2"><a href="análisis-y-visualización-de-datos.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> provincia, <span class="at">y =</span> price<span class="sc">/</span>surface_covered))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-77-1.png" width="1050" /></p>
<p>En el gráfico anterior podemos observar que la mediana del valor del m2 en CABA es superior al de GBA, pero estamos mezclando datos de ambos tipos de operaciones (alquileres y ventas), lo cual no es correcto. Para mejorar este aspecto facetemos el gráfico según tipo de operación:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="análisis-y-visualización-de-datos.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba) <span class="sc">+</span></span>
<span id="cb131-2"><a href="análisis-y-visualización-de-datos.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> provincia, <span class="at">y =</span> price<span class="sc">/</span>surface_covered)) <span class="sc">+</span></span>
<span id="cb131-3"><a href="análisis-y-visualización-de-datos.html#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>operation_type)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-78-1.png" width="1050" /></p>
<p>Si bien los valores que se manejan en cada operación son muy diferentes entre sí, en ambos casos se mantiene que la <strong>mediana del valor del m2 en CABA es superior que en GBA</strong>. Sin embargo, como las 2 escalas son muy diferentes, casi no se ven las cajas correspondientes a los alquileres.</p>
<p>Hagamos un filtro por Alquileres para ver mejor que ocurre ahí:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="análisis-y-visualización-de-datos.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb132-2"><a href="análisis-y-visualización-de-datos.html#cb132-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Alquiler&quot;</span>)) <span class="sc">+</span></span>
<span id="cb132-3"><a href="análisis-y-visualización-de-datos.html#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> provincia, <span class="at">y =</span> price<span class="sc">/</span>surface_covered, <span class="at">fill=</span>provincia), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb132-4"><a href="análisis-y-visualización-de-datos.html#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribución del valor del m2 de Alquileres en CABA y GBA&quot;</span>,</span>
<span id="cb132-5"><a href="análisis-y-visualización-de-datos.html#cb132-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Publicaciones de Junio y Julio 2020&quot;</span>,</span>
<span id="cb132-6"><a href="análisis-y-visualización-de-datos.html#cb132-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Valor del m2&quot;</span>,</span>
<span id="cb132-7"><a href="análisis-y-visualización-de-datos.html#cb132-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Zona&quot;</span>,</span>
<span id="cb132-8"><a href="análisis-y-visualización-de-datos.html#cb132-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Fuente: Properati&quot;</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-79-1.png" width="1050" /></p>
<p>La mediana de CABA está por encima pero claramente dentro de CABA hay muchas diferencias entre Comunas. Grafiquemos esto con datos de CABA desagregados por Comuna:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="análisis-y-visualización-de-datos.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb133-2"><a href="análisis-y-visualización-de-datos.html#cb133-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Alquiler&quot;</span> <span class="sc">&amp;</span> provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span>)) <span class="sc">+</span></span>
<span id="cb133-3"><a href="análisis-y-visualización-de-datos.html#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> partido, <span class="at">y =</span> price<span class="sc">/</span>surface_covered, <span class="at">fill=</span>partido), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb133-4"><a href="análisis-y-visualización-de-datos.html#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribución del valor del m2 de Alquileres en CABA y GBA&quot;</span>,</span>
<span id="cb133-5"><a href="análisis-y-visualización-de-datos.html#cb133-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Publicaciones de Junio y Julio 2020&quot;</span>,</span>
<span id="cb133-6"><a href="análisis-y-visualización-de-datos.html#cb133-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Valor del m2&quot;</span>,</span>
<span id="cb133-7"><a href="análisis-y-visualización-de-datos.html#cb133-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Comuna&quot;</span>,</span>
<span id="cb133-8"><a href="análisis-y-visualización-de-datos.html#cb133-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Fuente: Properati&quot;</span>)<span class="sc">+</span></span>
<span id="cb133-9"><a href="análisis-y-visualización-de-datos.html#cb133-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-80-1.png" width="1050" /></p>
<p>Se ve que:</p>
<ul>
<li>La Comuna 14 y la Comuna 1 tienen una mediana muy similar en el valor del m2 (el más alto de CABA).</li>
<li>La Comuna 14 presenta la mayor cantidad de outliers, motivo por el cual al calcular promedios siempre está por encima de la Comuna 1.</li>
<li>La Comuna 1 presenta la mayor variación en el valor del m2: va desde 200ARS hasta 1500ARS aprox. Esto se puede deber a la heterogeneidad de barrios que contiene.</li>
<li>La Comuna 8 tiene muy pocas observaciones.</li>
<li>La Comuna 10 presenta el menor valor del m2.</li>
</ul>
<p>Veamos que pasa si filtramos solo PBA y lo desagregamos por Partido:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="análisis-y-visualización-de-datos.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb134-2"><a href="análisis-y-visualización-de-datos.html#cb134-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Alquiler&quot;</span> <span class="sc">&amp;</span> provincia<span class="sc">==</span><span class="st">&quot;GBA&quot;</span>)) <span class="sc">+</span></span>
<span id="cb134-3"><a href="análisis-y-visualización-de-datos.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> partido, <span class="at">y =</span> price<span class="sc">/</span>surface_covered, <span class="at">fill=</span>partido), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb134-4"><a href="análisis-y-visualización-de-datos.html#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribución del valor del m2 de Alquileres en CABA y GBA&quot;</span>,</span>
<span id="cb134-5"><a href="análisis-y-visualización-de-datos.html#cb134-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Publicaciones de Junio y Julio 2020&quot;</span>,</span>
<span id="cb134-6"><a href="análisis-y-visualización-de-datos.html#cb134-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Valor del m2&quot;</span>,</span>
<span id="cb134-7"><a href="análisis-y-visualización-de-datos.html#cb134-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Partido&quot;</span>,</span>
<span id="cb134-8"><a href="análisis-y-visualización-de-datos.html#cb134-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Fuente: Properati&quot;</span>)<span class="sc">+</span></span>
<span id="cb134-9"><a href="análisis-y-visualización-de-datos.html#cb134-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-81-1.png" width="1050" /></p>
<p>Acá vemos que:</p>
<ul>
<li>Vicente López presenta la mayor variación en el valor del m2 y la mediana más alta de los partidos incluidos en la base.</li>
<li>Presidente Perón es el partido de la base con menor valor del m2.</li>
</ul>
<p>Este análisis también podríamos hacerlo comparando entre partidos específicos y diferenciando por mes de publicación, por ejemplo:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="análisis-y-visualización-de-datos.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb135-2"><a href="análisis-y-visualización-de-datos.html#cb135-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Alquiler&quot;</span> <span class="sc">&amp;</span> partido<span class="sc">==</span><span class="fu">c</span>(<span class="st">&quot;Vicente López&quot;</span>, <span class="st">&quot;La Matanza&quot;</span>, <span class="st">&quot;La Plata&quot;</span>))) <span class="sc">+</span></span>
<span id="cb135-3"><a href="análisis-y-visualización-de-datos.html#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> partido, <span class="at">y =</span> price<span class="sc">/</span>surface_covered, <span class="at">fill=</span>partido), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb135-4"><a href="análisis-y-visualización-de-datos.html#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribución del valor del m2 de CABA y GBA&quot;</span>,</span>
<span id="cb135-5"><a href="análisis-y-visualización-de-datos.html#cb135-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Junio y Julio 2020&quot;</span>,</span>
<span id="cb135-6"><a href="análisis-y-visualización-de-datos.html#cb135-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Valor del m2&quot;</span>,</span>
<span id="cb135-7"><a href="análisis-y-visualización-de-datos.html#cb135-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Partido&quot;</span>,</span>
<span id="cb135-8"><a href="análisis-y-visualización-de-datos.html#cb135-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Partido&quot;</span>,</span>
<span id="cb135-9"><a href="análisis-y-visualización-de-datos.html#cb135-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Fuente: Properati&quot;</span>)<span class="sc">+</span></span>
<span id="cb135-10"><a href="análisis-y-visualización-de-datos.html#cb135-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(created_on<span class="sc">~</span>.)<span class="sc">+</span></span>
<span id="cb135-11"><a href="análisis-y-visualización-de-datos.html#cb135-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set3&quot;</span>)<span class="sc">+</span></span>
<span id="cb135-12"><a href="análisis-y-visualización-de-datos.html#cb135-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-82-1.png" width="1050" /></p>
</div>
<div id="relación-entre-variables-numéricas-gráfico-de-dispersión" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Relación entre variables numéricas: Gráfico de Dispersión</h2>
<p>Ahora veamos el clásico gráfico de puntos o scatter plot que muestra la dispersión que existe entre 2 variables numéricas representadas en los 2 ejes X e Y, y que permite identificar si existe o no una relación entre ambas.</p>
<p>Veamos por ejemplo, si existe relación entre la superficie cubierta (surface_covered) y el precio total (price) de las propiedades:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="análisis-y-visualización-de-datos.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb136-2"><a href="análisis-y-visualización-de-datos.html#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>surface_covered, <span class="at">y=</span>price))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-83-1.png" width="1050" /></p>
<p>Tiene sentido, a mayor superficie cubierta, mayor valor. Pero veamos esto desagregado entre tipos de operaciones a ver que pasa:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="análisis-y-visualización-de-datos.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb137-2"><a href="análisis-y-visualización-de-datos.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>surface_covered, <span class="at">y=</span>price, <span class="at">color=</span>operation_type), <span class="at">alpha=</span><span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-84-1.png" width="1050" /></p>
<p>A los gráficos de dispersión también se les puede agregar una tercer variable categórica o numérica que puede verse reflejada en la estética de los puntos (color, forma o tamaño).</p>
<p>Agreguemos una tercer variable (categórica) a nuestro gráfico: la provincia</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="análisis-y-visualización-de-datos.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb138-2"><a href="análisis-y-visualización-de-datos.html#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>surface_covered, <span class="at">y=</span>price, <span class="at">color=</span>operation_type), <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb138-3"><a href="análisis-y-visualización-de-datos.html#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(provincia<span class="sc">~</span>.)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-85-1.png" width="1050" /></p>
<p>Podemos ver que en GBA no crece tan rápido la relación como en CABA.</p>
<p>Quedemonos solo con las ventas y agreguemos una tercer variable numérica: el valor del m2</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="análisis-y-visualización-de-datos.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb139-2"><a href="análisis-y-visualización-de-datos.html#cb139-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span>))<span class="sc">+</span></span>
<span id="cb139-3"><a href="análisis-y-visualización-de-datos.html#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>surface_covered, <span class="at">y=</span>price, <span class="at">color=</span>price<span class="sc">/</span>surface_covered), <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb139-4"><a href="análisis-y-visualización-de-datos.html#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(provincia<span class="sc">~</span>.) <span class="sc">+</span></span>
<span id="cb139-5"><a href="análisis-y-visualización-de-datos.html#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>(<span class="at">option=</span><span class="st">&quot;magma&quot;</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-86-1.png" width="1050" /></p>
<p>Ahora aprovechemos que tenemos longitud y latitud de cada registro y hagamos un gráfico de puntos que nos permita ver la relación entre ambas variables:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="análisis-y-visualización-de-datos.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb140-2"><a href="análisis-y-visualización-de-datos.html#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>datos_amba, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-87-1.png" width="1050" /></p>
<p>¿A qué se parece? ¿Tiene forma de AMBA? Probemos coloreando según la variable provincia.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="análisis-y-visualización-de-datos.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb141-2"><a href="análisis-y-visualización-de-datos.html#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>datos_amba, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat, <span class="at">color=</span>provincia))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-88-1.png" width="1050" /></p>
</div>
<div id="relación-entre-variables-categóricas-gráfico-de-matriz" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Relación entre variables categóricas: Gráfico de Matriz</h2>
<p>Este tipo de gráfico representa un mapa de calor bidimensional que muestra la frecuencia que existe entre 2 variables dentro de la base de datos.</p>
<p>Para poder desarrollar la visualización es necesario elegir 3 variables:</p>
<p><strong>x</strong>: variable a ubicar en el eje X</p>
<p><strong>y</strong>: variable a ubicar en el eje Y</p>
<p><strong>fill</strong>: valor numérico que será representado a partir de los colores</p>
<p>Veamos un ejemplo relacionando el partido y la cantidad de ambientes:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="análisis-y-visualización-de-datos.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb142-2"><a href="análisis-y-visualización-de-datos.html#cb142-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(partido, rooms) <span class="sc">%&gt;%</span></span>
<span id="cb142-3"><a href="análisis-y-visualización-de-datos.html#cb142-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">cantidad=</span><span class="fu">n</span>())) <span class="sc">+</span> </span>
<span id="cb142-4"><a href="análisis-y-visualización-de-datos.html#cb142-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">x =</span> partido,</span>
<span id="cb142-5"><a href="análisis-y-visualización-de-datos.html#cb142-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> <span class="fu">as.factor</span>(rooms),</span>
<span id="cb142-6"><a href="análisis-y-visualización-de-datos.html#cb142-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> cantidad))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-89-1.png" width="1050" /></p>
<p>Mejoremos con <code>coord_flip()</code> el aspecto de la visualización:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="análisis-y-visualización-de-datos.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb143-2"><a href="análisis-y-visualización-de-datos.html#cb143-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(partido, rooms) <span class="sc">%&gt;%</span></span>
<span id="cb143-3"><a href="análisis-y-visualización-de-datos.html#cb143-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">cantidad=</span><span class="fu">n</span>())) <span class="sc">+</span> </span>
<span id="cb143-4"><a href="análisis-y-visualización-de-datos.html#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">x =</span> partido,</span>
<span id="cb143-5"><a href="análisis-y-visualización-de-datos.html#cb143-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> <span class="fu">as.factor</span>(rooms),</span>
<span id="cb143-6"><a href="análisis-y-visualización-de-datos.html#cb143-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> cantidad)) <span class="sc">+</span></span>
<span id="cb143-7"><a href="análisis-y-visualización-de-datos.html#cb143-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb143-8"><a href="análisis-y-visualización-de-datos.html#cb143-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-90-1.png" width="1050" /></p>
<p>Se puede ver por ejemplo que la relación Comuna 14 + 2 ambientes, y Comuna 14 + 3 ambientes es la que más se repite (más de 600 veces cada una). Filtremos solo CABA:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="análisis-y-visualización-de-datos.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb144-2"><a href="análisis-y-visualización-de-datos.html#cb144-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(provincia<span class="sc">==</span><span class="st">&quot;CABA&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb144-3"><a href="análisis-y-visualización-de-datos.html#cb144-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(partido, rooms) <span class="sc">%&gt;%</span></span>
<span id="cb144-4"><a href="análisis-y-visualización-de-datos.html#cb144-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">cantidad=</span><span class="fu">n</span>())) <span class="sc">+</span> </span>
<span id="cb144-5"><a href="análisis-y-visualización-de-datos.html#cb144-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(partido),</span>
<span id="cb144-6"><a href="análisis-y-visualización-de-datos.html#cb144-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> <span class="fu">as.factor</span>(rooms),</span>
<span id="cb144-7"><a href="análisis-y-visualización-de-datos.html#cb144-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> cantidad)) <span class="sc">+</span></span>
<span id="cb144-8"><a href="análisis-y-visualización-de-datos.html#cb144-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb144-9"><a href="análisis-y-visualización-de-datos.html#cb144-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-91-1.png" width="1050" /></p>
<p>Obviamente se sigue viendo lo mismo de la Comuna 14 pero también se empieza a ver como la Comuna 13 y 15 también aparecen mucho con propiedades de 2 y 3 ambientes. Veamos el caso de GBA:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="análisis-y-visualización-de-datos.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb145-2"><a href="análisis-y-visualización-de-datos.html#cb145-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(provincia<span class="sc">==</span><span class="st">&quot;GBA&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb145-3"><a href="análisis-y-visualización-de-datos.html#cb145-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(partido, rooms) <span class="sc">%&gt;%</span></span>
<span id="cb145-4"><a href="análisis-y-visualización-de-datos.html#cb145-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">cantidad=</span><span class="fu">n</span>())) <span class="sc">+</span> </span>
<span id="cb145-5"><a href="análisis-y-visualización-de-datos.html#cb145-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(partido),</span>
<span id="cb145-6"><a href="análisis-y-visualización-de-datos.html#cb145-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> <span class="fu">as.factor</span>(rooms),</span>
<span id="cb145-7"><a href="análisis-y-visualización-de-datos.html#cb145-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> cantidad)) <span class="sc">+</span></span>
<span id="cb145-8"><a href="análisis-y-visualización-de-datos.html#cb145-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb145-9"><a href="análisis-y-visualización-de-datos.html#cb145-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-92-1.png" width="1050" /></p>
<p>En GBA la mayor cantidad se ve en Tigre con 3 ambientes, seguida por 2 y 4. También hay varias propiedades de 2 y 3 ambientes en La Plata.</p>
</div>
<div id="relación-entre-variable-numérica-y-categórica-gráfico-de-barras" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Relación entre variable numérica y categórica: Gráfico de Barras</h2>
<p>El gráfico de barras representa, a partir de la longitud de las barras, el valor numérico (eje Y) asociado a cada entidad de la variable categórica (eje X).</p>
<p>Al igual que en el resto de visualizaciones, es necesario elegir una variable para el eje X y otra para el eje Y (acá se llama weight). Sin embargo, si no asignamos ninguna variable numérica a weight, el gráfico automáticamente va a calcular cuantas veces aparece cada categoría en la base de datos.</p>
<p>Por ejemplo, veamos cuantas observaciones hay por tipo de operación:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="análisis-y-visualización-de-datos.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb146-2"><a href="análisis-y-visualización-de-datos.html#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>operation_type))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-93-1.png" width="1050" /></p>
<p>En el gráfico anterior podemos ver que hay alrededor de 12.000 propiedades en venta y 3.000 en alquiler.</p>
<p>Veamos esto desagregado por tipo de propiedad:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="análisis-y-visualización-de-datos.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb147-2"><a href="análisis-y-visualización-de-datos.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>operation_type, <span class="at">fill=</span>property_type))</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-94-1.png" width="1050" /></p>
<p>Como ya venimos viendo a lo largo de todo el capítulo, predominan los departamentos en ambos casos. Veamos esto también por zona y ajustemos cuestiones estéticas del gráfico:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="análisis-y-visualización-de-datos.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb148-2"><a href="análisis-y-visualización-de-datos.html#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>operation_type, <span class="at">fill=</span>property_type)) <span class="sc">+</span></span>
<span id="cb148-3"><a href="análisis-y-visualización-de-datos.html#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;turquoise4&quot;</span>, <span class="st">&quot;deeppink3&quot;</span>)) <span class="sc">+</span></span>
<span id="cb148-4"><a href="análisis-y-visualización-de-datos.html#cb148-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>provincia)<span class="sc">+</span></span>
<span id="cb148-5"><a href="análisis-y-visualización-de-datos.html#cb148-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Oferta publicada según Zona por Operación y Tipo de Propiedad&quot;</span>,</span>
<span id="cb148-6"><a href="análisis-y-visualización-de-datos.html#cb148-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Tipo&quot;</span>,</span>
<span id="cb148-7"><a href="análisis-y-visualización-de-datos.html#cb148-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Operación&quot;</span>,</span>
<span id="cb148-8"><a href="análisis-y-visualización-de-datos.html#cb148-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Cantidad&quot;</span>,</span>
<span id="cb148-9"><a href="análisis-y-visualización-de-datos.html#cb148-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati Junio y Julio 2020&quot;</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-95-1.png" width="1050" /></p>
<p>Siguen predominando los departamentos pero también se puede ver como la cantidad de casas en venta en GBA es muy similar a la de departamentos.</p>
<p>Las <strong>barras apiladas con valores absolutos</strong> es una de las opciones a la hora de graficar y la que nos hace por defecto <code>ggplot2</code>, pero existen 2 más: las barras apiladas con valores relativos (%) y las barras agrupadas con valores absolutos.</p>
<p>Veamos de que se trata cada una!</p>
<p><strong>Barras apiladas con valores relativos (%)</strong></p>
<p>Este tipo de gráfico ayuda a detectar las diferencias relativas que existen entre los valores continuos de cada grupo/categoría. Cada barra del gráfico muestra el total de cada categoría y se representa por el apilado de los porcentajes de cada valor. Con <code>ggplot()</code> usaremos <code>position=position_fill()</code>:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="análisis-y-visualización-de-datos.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb149-2"><a href="análisis-y-visualización-de-datos.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>operation_type, <span class="at">fill=</span>property_type), <span class="at">position=</span><span class="fu">position_fill</span>()) <span class="sc">+</span></span>
<span id="cb149-3"><a href="análisis-y-visualización-de-datos.html#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;turquoise4&quot;</span>, <span class="st">&quot;deeppink3&quot;</span>)) <span class="sc">+</span></span>
<span id="cb149-4"><a href="análisis-y-visualización-de-datos.html#cb149-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>provincia)<span class="sc">+</span></span>
<span id="cb149-5"><a href="análisis-y-visualización-de-datos.html#cb149-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Oferta publicada según Zona por Operación y Tipo de Propiedad&quot;</span>,</span>
<span id="cb149-6"><a href="análisis-y-visualización-de-datos.html#cb149-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Tipo&quot;</span>,</span>
<span id="cb149-7"><a href="análisis-y-visualización-de-datos.html#cb149-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Operación&quot;</span>,</span>
<span id="cb149-8"><a href="análisis-y-visualización-de-datos.html#cb149-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Porcentaje&quot;</span>,</span>
<span id="cb149-9"><a href="análisis-y-visualización-de-datos.html#cb149-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati Junio y Julio 2020&quot;</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-96-1.png" width="1050" /></p>
<p><strong>Barras agrupadas con valores absolutos</strong></p>
<p>Este tipo de gráfico se utiliza cuando los datos absolutos se agrupan en 2 o más categorías dentro del mismo eje. Con <code>ggplot()</code> usaremos <code>position=position_dodge()</code>:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="análisis-y-visualización-de-datos.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb150-2"><a href="análisis-y-visualización-de-datos.html#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>operation_type, <span class="at">fill=</span>property_type), <span class="at">position=</span><span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb150-3"><a href="análisis-y-visualización-de-datos.html#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;turquoise4&quot;</span>, <span class="st">&quot;deeppink3&quot;</span>)) <span class="sc">+</span></span>
<span id="cb150-4"><a href="análisis-y-visualización-de-datos.html#cb150-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>provincia)<span class="sc">+</span></span>
<span id="cb150-5"><a href="análisis-y-visualización-de-datos.html#cb150-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Oferta publicada según Zona por Operación y Tipo de Propiedad&quot;</span>,</span>
<span id="cb150-6"><a href="análisis-y-visualización-de-datos.html#cb150-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Tipo&quot;</span>,</span>
<span id="cb150-7"><a href="análisis-y-visualización-de-datos.html#cb150-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Operación&quot;</span>,</span>
<span id="cb150-8"><a href="análisis-y-visualización-de-datos.html#cb150-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Cantidad&quot;</span>,</span>
<span id="cb150-9"><a href="análisis-y-visualización-de-datos.html#cb150-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati Junio y Julio 2020&quot;</span>)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-97-1.png" width="1050" /></p>
<p>Ahora investiguemos otra variable de nuestro dataset, veamos <strong>de cuántos ambientes son las propiedades que predominan en cada zona para cada operación inmobiliaria</strong>:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="análisis-y-visualización-de-datos.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba)<span class="sc">+</span></span>
<span id="cb151-2"><a href="análisis-y-visualización-de-datos.html#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">as.factor</span>(rooms), <span class="at">fill=</span>provincia), <span class="at">position=</span><span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb151-3"><a href="análisis-y-visualización-de-datos.html#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Oferta de Propiedades en Alquiler&quot;</span>,</span>
<span id="cb151-4"><a href="análisis-y-visualización-de-datos.html#cb151-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;Según cantidad de ambientes&quot;</span>,</span>
<span id="cb151-5"><a href="análisis-y-visualización-de-datos.html#cb151-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Zona&quot;</span>,</span>
<span id="cb151-6"><a href="análisis-y-visualización-de-datos.html#cb151-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Cantidad de Ambientes&quot;</span>,</span>
<span id="cb151-7"><a href="análisis-y-visualización-de-datos.html#cb151-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Cantidad&quot;</span>,</span>
<span id="cb151-8"><a href="análisis-y-visualización-de-datos.html#cb151-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb151-9"><a href="análisis-y-visualización-de-datos.html#cb151-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;indianred2&quot;</span>)) <span class="sc">+</span></span>
<span id="cb151-10"><a href="análisis-y-visualización-de-datos.html#cb151-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(operation_type<span class="sc">~</span>.)</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-98-1.png" width="1050" /></p>
<p>Vemos que:</p>
<ul>
<li>Los monoambientes publicados en CABA triplican los publicados en GBA.</li>
<li>Para ambas operaciones, en CABA predominan los 2 y 3 ambientes.</li>
<li>En las ventas de GBA predominan los 2, 3 y 4 ambientes.</li>
<li>Para ambas zonas, las propiedades con más de 5 ambientes solo se encuentran en venta (no en alquiler).</li>
</ul>
<p>Ahora entremos más en detalle y analicemos los datos por partido. Para eso filtremos por <strong>Ventas</strong> e incorporemos un valor weight: <strong>precio del m2</strong>. Como vimos que hay varios ouliers en los datos del valor del m2 que pueden afectar el promedio, utilizaremos la mediana:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="análisis-y-visualización-de-datos.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb152-2"><a href="análisis-y-visualización-de-datos.html#cb152-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(provincia, partido, operation_type) <span class="sc">%&gt;%</span></span>
<span id="cb152-3"><a href="análisis-y-visualización-de-datos.html#cb152-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">cantidad=</span><span class="fu">n</span>(),</span>
<span id="cb152-4"><a href="análisis-y-visualización-de-datos.html#cb152-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">price_m2=</span><span class="fu">median</span>(price<span class="sc">/</span>surface_covered)) <span class="sc">%&gt;%</span></span>
<span id="cb152-5"><a href="análisis-y-visualización-de-datos.html#cb152-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span>))<span class="sc">+</span></span>
<span id="cb152-6"><a href="análisis-y-visualización-de-datos.html#cb152-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(partido, price_m2), <span class="at">weight=</span>price_m2, <span class="at">fill=</span>provincia)) <span class="sc">+</span></span>
<span id="cb152-7"><a href="análisis-y-visualización-de-datos.html#cb152-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Valor del m2 de Propiedades en Venta&quot;</span>,</span>
<span id="cb152-8"><a href="análisis-y-visualización-de-datos.html#cb152-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;CABA + GBA&quot;</span>,</span>
<span id="cb152-9"><a href="análisis-y-visualización-de-datos.html#cb152-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Zona&quot;</span>,</span>
<span id="cb152-10"><a href="análisis-y-visualización-de-datos.html#cb152-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Partido&quot;</span>,</span>
<span id="cb152-11"><a href="análisis-y-visualización-de-datos.html#cb152-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Valor del m2 (USD)&quot;</span>,</span>
<span id="cb152-12"><a href="análisis-y-visualización-de-datos.html#cb152-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb152-13"><a href="análisis-y-visualización-de-datos.html#cb152-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;indianred2&quot;</span>)) <span class="sc">+</span></span>
<span id="cb152-14"><a href="análisis-y-visualización-de-datos.html#cb152-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb152-15"><a href="análisis-y-visualización-de-datos.html#cb152-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-99-1.png" width="1050" /></p>
<p>Se ve un poco empastado y es difícil de leer. Probemos filtrando solo aquellos donde el valor del m2 es mayor a 2.000 USD:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="análisis-y-visualización-de-datos.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb153-2"><a href="análisis-y-visualización-de-datos.html#cb153-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(provincia, partido, operation_type) <span class="sc">%&gt;%</span></span>
<span id="cb153-3"><a href="análisis-y-visualización-de-datos.html#cb153-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">cantidad=</span><span class="fu">n</span>(),</span>
<span id="cb153-4"><a href="análisis-y-visualización-de-datos.html#cb153-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">price_m2=</span><span class="fu">median</span>(price<span class="sc">/</span>surface_covered)) <span class="sc">%&gt;%</span></span>
<span id="cb153-5"><a href="análisis-y-visualización-de-datos.html#cb153-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span> <span class="sc">&amp;</span> price_m2<span class="sc">&gt;=</span><span class="dv">2000</span>))<span class="sc">+</span></span>
<span id="cb153-6"><a href="análisis-y-visualización-de-datos.html#cb153-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(partido, price_m2), <span class="at">weight=</span>price_m2, <span class="at">fill=</span>provincia)) <span class="sc">+</span></span>
<span id="cb153-7"><a href="análisis-y-visualización-de-datos.html#cb153-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Valor del m2 de Propiedades en Venta&quot;</span>,</span>
<span id="cb153-8"><a href="análisis-y-visualización-de-datos.html#cb153-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;CABA + GBA&quot;</span>,</span>
<span id="cb153-9"><a href="análisis-y-visualización-de-datos.html#cb153-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Zona&quot;</span>,</span>
<span id="cb153-10"><a href="análisis-y-visualización-de-datos.html#cb153-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Partido&quot;</span>,</span>
<span id="cb153-11"><a href="análisis-y-visualización-de-datos.html#cb153-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Valor del m2 (USD)&quot;</span>,</span>
<span id="cb153-12"><a href="análisis-y-visualización-de-datos.html#cb153-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb153-13"><a href="análisis-y-visualización-de-datos.html#cb153-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;indianred2&quot;</span>)) <span class="sc">+</span></span>
<span id="cb153-14"><a href="análisis-y-visualización-de-datos.html#cb153-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb153-15"><a href="análisis-y-visualización-de-datos.html#cb153-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-100-1.png" width="1050" /></p>
<p>Agreguemos etiquetas con <code>geom_text()</code> que nos faciliten la lectura:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="análisis-y-visualización-de-datos.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_amba <span class="sc">%&gt;%</span></span>
<span id="cb154-2"><a href="análisis-y-visualización-de-datos.html#cb154-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(provincia, partido, operation_type) <span class="sc">%&gt;%</span></span>
<span id="cb154-3"><a href="análisis-y-visualización-de-datos.html#cb154-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">cantidad=</span><span class="fu">n</span>(),</span>
<span id="cb154-4"><a href="análisis-y-visualización-de-datos.html#cb154-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">price_m2=</span><span class="fu">median</span>(price<span class="sc">/</span>surface_covered)) <span class="sc">%&gt;%</span></span>
<span id="cb154-5"><a href="análisis-y-visualización-de-datos.html#cb154-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(operation_type<span class="sc">==</span><span class="st">&quot;Venta&quot;</span> <span class="sc">&amp;</span> price_m2<span class="sc">&gt;=</span><span class="dv">2000</span>))<span class="sc">+</span></span>
<span id="cb154-6"><a href="análisis-y-visualización-de-datos.html#cb154-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(partido, price_m2), <span class="at">weight=</span>price_m2, <span class="at">fill=</span>provincia)) <span class="sc">+</span></span>
<span id="cb154-7"><a href="análisis-y-visualización-de-datos.html#cb154-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x=</span>partido, <span class="at">y=</span>price_m2<span class="sc">+</span><span class="dv">100</span>, <span class="at">label=</span><span class="fu">as.integer</span>(price_m2)), <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">color=</span><span class="st">&quot;gray14&quot;</span>)<span class="sc">+</span></span>
<span id="cb154-8"><a href="análisis-y-visualización-de-datos.html#cb154-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Valor del m2 de Propiedades en Venta&quot;</span>,</span>
<span id="cb154-9"><a href="análisis-y-visualización-de-datos.html#cb154-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;CABA + GBA&quot;</span>,</span>
<span id="cb154-10"><a href="análisis-y-visualización-de-datos.html#cb154-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Zona&quot;</span>,</span>
<span id="cb154-11"><a href="análisis-y-visualización-de-datos.html#cb154-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Partido&quot;</span>,</span>
<span id="cb154-12"><a href="análisis-y-visualización-de-datos.html#cb154-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Valor del m2 (USD)&quot;</span>,</span>
<span id="cb154-13"><a href="análisis-y-visualización-de-datos.html#cb154-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: Properati&quot;</span>) <span class="sc">+</span></span>
<span id="cb154-14"><a href="análisis-y-visualización-de-datos.html#cb154-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;indianred2&quot;</span>)) <span class="sc">+</span></span>
<span id="cb154-15"><a href="análisis-y-visualización-de-datos.html#cb154-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb154-16"><a href="análisis-y-visualización-de-datos.html#cb154-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="manual-big-data-urbana_files/figure-html/unnamed-chunk-101-1.png" width="1050" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="manipulaciÃ³n-de-datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="información-geográfica-y-mapas.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["manual-big-data-urbana.pdf", "manual-big-data-urbana.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
