[
["index.html", "BIG DATA URBANA Herramientas y Datos para conocer el Territorio INTRODUCCIÓN Programa", " BIG DATA URBANA Herramientas y Datos para conocer el Territorio Angie Scetta 2020-10-19 INTRODUCCIÓN ¡Hola a todos! ¡Bienvenidos a BIG DATA URBANA! Estamos en un momento en que las Ciudades producen millones y millones de datos por segundo y hoy tenemos la posibilidad de aprovecharlos desde nuestra profesión para poder trabajar y tomar decisiones en base a evidencia real. El objetivo del curso es presentar a los profesionales interesados en analizar diversas variables territoriales (sociodemográficas, mercado inmobiliario, actividad económica, transporte, movilidad, salud, educación, etc), la importancia de conocer herramientas analíticas que les permitan manipular y extraer conocimiento de grandes volúmenes de datos para tomar mejores decisiones a la hora de diagnosticar, comprender e intervenir el territorio. El curso será práctico y se enseñarán los conocimientos básicos del lenguaje de programación R y del software libre RStudio, y su potencialidad para el análisis de datos urbanos. A lo largo de 4 clases aplicaremos la herramienta a un ejemplo real, con el fin de analizar, describir, interpretar, visualizar y extraer conocimiento de datos existentes. El caso de estudio será el mercado inmobiliario en CABA y se utilizarán datos provenientes de fuentes públicas. Será un curso de 4 clases de 3hs donde se estima un 90% práctico y un 10% teórico. Programa Clase 1: CONOCER ¿Qué es la Ciencia de Datos? ¿Cómo utilizar grandes volúmenes de datos para analizar dinámicas urbanas? ¿Qué datos existen? ¿Qué información contienen las bases de datos? ¿Cómo se estructuran? Introducción a programación en lenguaje R y el software RStudio. Para esta clase será necesario tener previamente instalado el lenguaje de programación R (https://cloud.r-project.org/), y la interfaz gráfica RStudio Desktop (https://rstudio.com/products/rstudio/download/). En el caso de no poder instalar correctamente el programa, se recomienda utilizar RStudio Cloud (https://rstudio.cloud/). Clase 2: COMPRENDER Las funciones de tidyverse para interpretar, manipular y transformar los datos: Extraer información útil a partir de Seleccionar, Filtrar, Ordenar, Modificar, Resumir, Agrupar y Renombrar los datos. Clase 3: GRAFICAR ¿Qué dicen los datos? ¿Cómo puedo facilitar la comprensión de la información? Extraer conocimiento de los datos a partir de la visualización de los mismos. Comunicar resultados a partir de gráficos. Clase 4: MAPEAR ¿Dónde se ubican los datos? ¿Cómo se distribuyen en el territorio? ¿Presentan algún patrón espacial? Análisis espacial de los datos. Visualización e interpretación a partir de mapas. "],
["conocer.html", "Clase 1 CONOCER 1.1 Interfaz Gráfica de RStudio 1.2 Formato RMarkdown 1.3 Nuestro primer dataset", " Clase 1 CONOCER ¿Qué es R y RStudio? RStudio es una interfaz libre y gratuita que nos permite explotar todo el potencial que tiene el lenguaje de programación R. R es un lenguaje que ofrece una gran variedad de funciones para realizar cálculos estadísticos y generar diversos gráficos a partir de los datos. Sin embargo, el gran potencial está en que, al ser libre y colaborativo, constantemente los usuarios están actualizando y ampliando la cantidad de funciones que presenta. Hoy en día podemos realizar desde operaciones básicas sobre los datos hasta aplicar algoritmos de inteligencia artificial. A su vez, dentro de RStudio, hay diferentes formatos de archivos (RMarkdown, RScript, RNotebook, etc) que su elección depende del objetivo que tengamos. En nuestro caso, a lo largo del curso trabajaremos con el formato RMarkdown, un tipo de documento de RStudio que integra texto con código de R y nos permite generar informes a partir de los datos. Empecemos de a poco: Primero tenemos que crear un nuevo proyecto y un nuevo RMarkdown. Los pasos a seguir pueden encontrarlos en el siguiente tutorial: https://rpubs.com/angiescetta/conociendo-R 1.1 Interfaz Gráfica de RStudio Antes de seguir, analicemos un poco la Interfaz Gráfica de RStudio: Tal como se ve en la imagen, podríamos dividir la interfaz en 4 partes/ventanas: Panel de Edición Este panel es en el que vamos a estar creando y modificando nuestro RMarkdown. Aquí también podría haber otro formato de archivo R, como por ejemplo R Script o R Notebook. Entorno de Variables En esta ventana iremos viendo todos los datos que hayamos cargado. Desde aquí también podremos importar o eliminar datos. Desde la pestaña Historial podremos consultar el historial de comandos y funciones que fuimos utilizando en el Proyecto. Consola En la ventana inferior izquierda irá apareciendo todo lo que ejecutemos tanto desde el Panel de Edición como desde el Entorno de Variables, pero también podemos escribir líneas de código que queremos que se ejecuten y no queremos dejarlas escritas en el RMarkdown. Panel de Utilidades En la ventana inferior derecha se pueden ver varias cosas: Files: El Directorio donde estamos trabajando. Plots: Las visualizaciones/gráficos que se van generando. Packages: Los paquetes de R disponibles. Help: Una sección de ayuda donde podemos consultar información de las funciones. Viewer: Un visor HTML para ver los gráficos interactivos o animados que hayamos hecho. 1.2 Formato RMarkdown ¿Para que sirve el formato RMawkdown? Este formato sirve para manipular datos y armar informes listos para presentar. Hay 2 formas de escribir en un RMarkdown: Texto como el que estoy escribiendo ahora. El RMarkdown tiene una sintaxis específica para poder dar formato al texto del informe final, por ejemplo si escribimos así: Obtenemos los siguientes resultados: Bloques de código (o “chunks”) donde insertaremos nuestras líneas de código con el objetivo de manipular (analizar, modificar, visualizar) los datos. Esto es un chunk: Y se inserta haciendo click en Insert/R o con el siguiente atajo en el teclado: Ctrl + Shift + I 1.3 Nuestro primer dataset A lo largo del curso vamos a trabajar con los datos de Properati, un portal web de compra, venta y alquiler de inmuebles en toda América Latina. Estos datos son públicos y pueden encontrarlos en https://properati.com.ar/data. En este caso, para facilitar la manipulación de la información, usaremos un set de datos (en formato csv) previamente procesado que contiene datos de propiedades publicadas en AMBA en Junio y Julio del 2020. Pueden descargarlo de https://data.world/angie-scetta/amba-properati. Recomendación: Al descargarlo, moverlo de la carpeta “Descargas” a una nueva carpeta llamada “data” dentro de la carpeta del Proyecto donde estén trabajando. Ahora si, manos a la obra! Para cargar el dataset pueden copiar la siguiente línea de código y pegarla dentro de un chunk: datos_amba &lt;- read.csv(&quot;data/amba_properati.csv&quot;) Para entender la lógica detrás del chunk anterior pueden revisar este link: https://rpubs.com/angiescetta/importar-dataset Ahora conozcamos nuestro dataset: Veamos como se estructura (cuantas filas y columnas tiene) y que información trae… Para esto empezaremos utilizando dim(): dim(datos_amba) ## [1] 14929 13 Podemos ver que tenemos 14.929 registros/filas y 13 columnas. También podríamos ver esto por separado de la siguiente forma: ncol(datos_amba) ## [1] 13 nrow(datos_amba) ## [1] 14929 Pero ¿Qué información contienen esas 13 columnas? Esto podemos verlo con names(): names(datos_amba) ## [1] &quot;created_on&quot; &quot;provincia&quot; &quot;partido&quot; ## [4] &quot;rooms&quot; &quot;surface_total&quot; &quot;surface_covered&quot; ## [7] &quot;price&quot; &quot;currency&quot; &quot;title&quot; ## [10] &quot;property_type&quot; &quot;operation_type&quot; &quot;lat&quot; ## [13] &quot;lon&quot; Bien, las columnas tienen fecha de publicación de la propiedad, provincia y partido donde se ubica, cantidad de ambientes, superficie total y superficie cubierta, precio publicado, tipo de moneda (ARS o USD), el título que el usuario escribió al publicar su propiedad, el tipo de propiedad, el tipo de operación, y finalmente la ubicación del inmueble con sus coordenadas: latitud y longitud. Parece que cada fila/registro de la base corresponde a una propiedad publicada, pero veamos una pequeña muestra de la data con head() para estar seguros: head(datos_amba) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.61917 -58.46222 ## 2 Departamento Alquiler -34.55460 -58.46652 ## 3 Departamento Alquiler -34.56318 -58.46461 ## 4 Departamento Alquiler -34.61836 -58.36090 ## 5 Departamento Alquiler -34.53344 -58.49345 ## 6 PH Alquiler -34.66253 -58.52914 Y un resumen estadístico de la información: summary(datos_amba) ## created_on provincia partido rooms ## Min. :202006 CABA:8896 Comuna 14:2001 Min. : 1.000 ## 1st Qu.:202006 GBA :6033 Tigre :1222 1st Qu.: 2.000 ## Median :202006 Comuna 13:1193 Median : 3.000 ## Mean :202006 Comuna 15:1077 Mean : 3.057 ## 3rd Qu.:202007 Comuna 2 : 853 3rd Qu.: 4.000 ## Max. :202007 Comuna 1 : 765 Max. :10.000 ## (Other) :7818 ## surface_total surface_covered price currency ## Min. : 10 Min. : 10.00 Min. : 10000 ARS: 3251 ## 1st Qu.: 51 1st Qu.: 46.00 1st Qu.: 72000 USD:11678 ## Median : 75 Median : 66.00 Median : 140000 ## Mean : 117 Mean : 91.98 Mean : 206342 ## 3rd Qu.: 130 3rd Qu.:108.00 3rd Qu.: 250000 ## Max. :5000 Max. :882.00 Max. :3000000 ## ## title ## Departamento de 2 ambientes en Venta en Villa crespo: 182 ## Departamento de 2 ambientes en Venta en Almagro : 124 ## Departamento de 2 ambientes en Venta en Palermo : 124 ## Departamento de 3 ambientes en Venta en Villa crespo: 121 ## Departamento de 3 ambientes en Venta en Almagro : 108 ## Departamento de 3 ambientes en Venta en Palermo : 108 ## (Other) :14162 ## property_type operation_type lat lon ## Casa : 2297 Alquiler: 3251 Min. :-35.12 Min. :-59.04 ## Departamento:11344 Venta :11678 1st Qu.:-34.61 1st Qu.:-58.53 ## PH : 1288 Median :-34.59 Median :-58.45 ## Mean :-34.59 Mean :-58.47 ## 3rd Qu.:-34.55 3rd Qu.:-58.41 ## Max. :-34.26 Max. :-57.83 ## A priori, en este resumen podemos entender varias cosas de la data. Por ejemplo: Hay registros de propiedades publicadas entre Junio (Min) y Julio (Max) 2020. La mayoría de las publicaciones son en CABA (8.896 vs 6.033). El Partido/Comuna que más aparece es la Comuna 14 (Barrio de Palermo), seguido por Tigre. De las 3 tipologías de propiedades, lo que más hay es Departamentos, seguido por Casas y por último PHs. Hay más propiedades en Venta que en Alquiler (11.678 vs 3.251). Por último, investiguemos como es la estructura de la data, es decir que tipo de información tiene cada campo. Si bien algo ya nos imaginamos gracias al summary(), usemos str() para revisarlo: str(datos_amba) ## &#39;data.frame&#39;: 14929 obs. of 13 variables: ## $ created_on : int 202006 202006 202006 202006 202006 202006 202006 202006 202006 202006 ... ## $ provincia : Factor w/ 2 levels &quot;CABA&quot;,&quot;GBA&quot;: 1 1 1 1 2 2 2 1 1 1 ... ## $ partido : Factor w/ 50 levels &quot;Almirante Brown&quot;,..: 18 10 10 6 50 31 27 10 10 6 ... ## $ rooms : int 1 1 1 1 1 2 2 2 2 2 ... ## $ surface_total : int 40 30 31 35 36 24 40 60 53 39 ... ## $ surface_covered: int 37 30 29 35 27 24 40 50 44 34 ... ## $ price : int 22500 18000 17900 42000 19000 12000 15000 32000 26000 14000 ... ## $ currency : Factor w/ 2 levels &quot;ARS&quot;,&quot;USD&quot;: 1 1 1 1 1 1 1 1 1 1 ... ## $ title : Factor w/ 10634 levels &quot;- Casa Venta Tipo Chalet 5 Amb con Cochera - Villa Pueyrredo&quot;,..: 2864 8265 2810 7014 1091 7646 7622 4885 8682 2741 ... ## $ property_type : Factor w/ 3 levels &quot;Casa&quot;,&quot;Departamento&quot;,..: 2 2 2 2 2 3 3 2 2 2 ... ## $ operation_type : Factor w/ 2 levels &quot;Alquiler&quot;,&quot;Venta&quot;: 1 1 1 1 1 1 1 1 1 1 ... ## $ lat : num -34.6 -34.6 -34.6 -34.6 -34.5 ... ## $ lon : num -58.5 -58.5 -58.5 -58.4 -58.5 ... Existen varios tipos de datos, pero en nuestro set nos encontramos con 3: integer (int), numeric (num) y Factor. Ahora bien, ¿Qué significa eso? Integer son números enteros, es decir que el campo solo admite números sin decimales como por ejemplo cantidad de habitaciones de una propiedad. Numeric son números con decimales, como por ejemplo, latitud y longitud. Factor son categorías, por ejemplo Barrios, Partidos, Tipos de propiedades, etc. Además del tipo de dato, con str() también podemos ver la cantidad de niveles que tienen las variables de tipo Factor. Por ejemplo, se observa que la columna provincia solo tiene 2 categorías posibles (CABA o AMBA), en cambio la columna partido tiene 50. Bonus Track ¿Cómo hacemos si queremos ver la estructura o un resumen estadístico de una sola de las columnas del dataset? Para esto utilizamos el símbolo $ de la siguiente forma: summary(datos_amba$property_type) ## Casa Departamento PH ## 2297 11344 1288 str(datos_amba$property_type) ## Factor w/ 3 levels &quot;Casa&quot;,&quot;Departamento&quot;,..: 2 2 2 2 2 3 3 2 2 2 ... Generemos nuestro primer HTML Por último, generemos nuestro primer reporte HTML para poder ver todos los resultados en un único informe. Para esto debemos hacer click en Knit / Knit to HTML: Próximos Pasos Acá concluye la primer clase, pero los invito a que repliquen lo realizado con algún otro dataset que les interese. Pueden descargar datos de diversos portales abiertos como por ejemplo: Portal de Datos Abiertos de Argentina: https://datos.gob.ar/ Portal de Datos Abiertos de CABA: https://data.buenosaires.gob.ar/ Portal de Datos Abiertos de PBA: https://catalogo.datos.gba.gob.ar/ O de cualquier otro portal de datos que conozcan o encuentren! "],
["comprender.html", "Clase 2 COMPRENDER 2.1 Filtrar 2.2 Seleccionar 2.3 Modificar 2.4 Ordenar 2.5 Renombrar 2.6 Resumir y Agrupar 2.7 Concatenar funciones (%&gt;%)", " Clase 2 COMPRENDER Ahora que ya sabemos abrir un dataset y conocer que información tiene, vamos a aprender a manipular y transformar los datos. Para esto vamos a trabajar con uno de los paquetes más usados y más útiles de R que se llama tidyverse. Pero, ¿Qué es un paquete? Cuando instalamos R ya viene con múltiples funciones básicas para manipular datos, sin embargo el potencial de R surge con la posibilidad de incorporar constantemente nuevas funciones que nos permitan realizar nuevas tareas o mejorar el resultado de las ya existentes. Estos grupos de funciones son a los que llamamos paquetes o packages y para poder utilizarlos es necesario instalarlos por única vez en la computadora, y luego activarlos cada vez que vayamos a usarlos. Comencemos instalándolo. Esto podemos hacerlo manualmente en Tools/Install packages: O directamente escribiendo install.packages() adentro de un chunk: #install.packages(&quot;tidyverse&quot;) Una vez que instalamos el paquete, no vamos a tener que volver a hacerlo. Solamente vamos a tener que “activarlo” cada vez que queramos usarlo. Esta activación se hace con library() así: library(tidyverse) Ahora volvamos a cargar nuestro dataset (el mismo de la clase anterior): datos_amba &lt;- read.csv(&quot;data/amba_properati.csv&quot;) A continuación veremos como el paquete tidyverse nos va a permitir manipular nuestros datos a partir de las funciones: filtrar, modificar, seleccionar, ordenar, renombrar, resumir y agrupar. Aprender a utilizar todas estas funciones es muy importante ya que la comprensión, transformación y limpieza de los datos es la etapa que más tiempo nos llevará a la hora de encarar cualquier proyecto de Ciencia de Datos. 2.1 Filtrar Como su nombre lo indica, esta función hace referencia a realizar un filtro determinado sobre los registros/filas de toda la base de datos, es decir, quedarnos solo con las filas que cumplan cierta condición establecida. Gráficamente se vería como algo así: Esto nos será muy útil si por algún motivo queremos dejar de lado registros y utilizar solo una parte de la base. Por ejemplo, en el caso de nuestro dataset, que ya vimos que incluye datos de AMBA y CABA, podríamos filtrar la data y quedarnos solo con los registros ubicados en CABA: filtro &lt;- filter(datos_amba, provincia==&quot;CABA&quot;) head(filtro) ## created_on provincia partido rooms surface_total surface_covered price ## 1 202006 CABA Comuna 7 1 40 37 22500 ## 2 202006 CABA Comuna 13 1 30 30 18000 ## 3 202006 CABA Comuna 13 1 31 29 17900 ## 4 202006 CABA Comuna 1 1 35 35 42000 ## 5 202006 CABA Comuna 13 2 60 50 32000 ## 6 202006 CABA Comuna 13 2 53 44 26000 ## currency title ## 1 ARS Departamento - Flores ## 2 ARS Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 ARS Departamento - Belgrano ## 4 ARS Monoambiente con cochera. Zencity. Puerto Madero ## 5 ARS Depto 2AMB c/ Suite y Toilette - Deheza 1600 - Incluye Cochera ## 6 ARS Unico 2 ambientes A Estrenar! Posesion inmediata! - Nuñez ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.61917 -58.46222 ## 2 Departamento Alquiler -34.55460 -58.46652 ## 3 Departamento Alquiler -34.56318 -58.46461 ## 4 Departamento Alquiler -34.61836 -58.36090 ## 5 Departamento Alquiler -34.53795 -58.46671 ## 6 Departamento Alquiler -34.54756 -58.47037 O los del mes de Julio 2020: filtro &lt;- filter(datos_amba, created_on==202007) head(filtro) ## created_on provincia partido rooms surface_total surface_covered price ## 1 202007 GBA Tigre 2 108 69 20000 ## 2 202007 GBA Tigre 2 57 45 27500 ## 3 202007 CABA Comuna 14 1 45 40 23000 ## 4 202007 CABA Comuna 14 2 48 48 30000 ## 5 202007 CABA Comuna 14 2 42 37 26000 ## 6 202007 CABA Comuna 15 2 41 38 21000 ## currency ## 1 ARS ## 2 ARS ## 3 ARS ## 4 ARS ## 5 ARS ## 6 ARS ## title ## 1 DEPARTAMENTO EN ALQUILER EN NORDELTA 2 AMB CON TERRAZA Y JACUZZI ## 2 2 ambientes con cochera y baulera - Vista al Lago Central ## 3 Departamento en Alquiler con Balcón y Amenities ## 4 Botánico - 2 ambientes amueblado con vista a Boulevard Cerviño ## 5 Departamento - Palermo ## 6 Departamento de 2 ambientes en Alquiler en Palermo ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.39437 -58.64925 ## 2 Departamento Alquiler -34.40910 -58.63129 ## 3 Departamento Alquiler -34.59274 -58.42749 ## 4 Departamento Alquiler -34.57914 -58.41289 ## 5 Departamento Alquiler -34.59571 -58.41587 ## 6 Departamento Alquiler -34.59856 -58.43026 Nótese que para filtrar bajo la condición de “igual” utilicé “==”, pero también podría haber utilizado otras condiciones como: A==B -&gt; A igual a B A!=B -&gt; A diferente a B A&lt;B -&gt; A menor a B A&lt;=B -&gt; A menor o igual a B A&gt;B -&gt; A mayor a B A&gt;=B -&gt; A mayor o igual a B is.na(A) -&gt; A tiene valor nulo (NA) !is.na(A)-&gt; A no tiene valor nulo (NA) A%in%B -&gt; A incluye el valor B !(A%in%B)-&gt; A no incluye el valor de B Entonces, por ejemplo si quiero quedarme solo con las propiedades que tienen una superficie cubierta mayor o igual a 75m2 debería escribirlo así: filtro &lt;- filter(datos_amba, surface_covered&gt;=75) head(filtro) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 GBA Ituzaingó 3 75 75 ## 2 202006 GBA Tigre 3 95 80 ## 3 202006 GBA Tigre 3 98 90 ## 4 202006 CABA Comuna 13 3 109 94 ## 5 202006 CABA Comuna 14 3 152 152 ## 6 202006 CABA Comuna 14 3 90 85 ## price currency ## 1 19000 ARS ## 2 42000 ARS ## 3 42000 ARS ## 4 90000 ARS ## 5 240000 ARS ## 6 80000 ARS ## title ## 1 Americana a 6 cuadras de la estacion de S.A. de Padua ## 2 3 AMBIENTES EN EDIFICIO MIRADORES DE LA BAHIA CON COCHERA FIJA ## 3 ¡EN EXCLUSIVA! Departamento en alquiler de 3 ambientes Miradores de La Bahía, Bahía de Nordelta. ## 4 Alquiler Depto 3 Amb a Estrenar Nuñez C/Cochera ## 5 ALQUILER en TORRES DE GELLY 152 m2 con 2 dorm dep y 1 coch ALTO vista Rio SIN muebles ## 6 ALQUILER 3 AMB CON DEPENDENCIA! - Y COCHERA TORRE AMENITIES!! ## property_type operation_type lat lon ## 1 Casa Alquiler -34.65957 -58.69712 ## 2 Departamento Alquiler -34.39642 -58.64665 ## 3 Departamento Alquiler -34.39512 -58.64665 ## 4 Departamento Alquiler -34.54521 -58.46286 ## 5 Departamento Alquiler -34.57760 -58.40499 ## 6 Departamento Alquiler -34.59353 -58.41462 O si quiero eliminar los registros que corresponden a departamentos debería hacer el siguiente chunk: filtro &lt;- filter(datos_amba, property_type!=&quot;Departamento&quot;) head(filtro) ## created_on provincia partido rooms surface_total ## 1 202006 GBA La Matanza 2 24 ## 2 202006 GBA General San Martín 2 40 ## 3 202006 GBA Ituzaingó 3 75 ## 4 202006 CABA Comuna 14 4 125 ## 5 202006 GBA Merlo 4 180 ## 6 202006 GBA Pilar 4 267 ## surface_covered price currency ## 1 24 12000 ARS ## 2 40 15000 ARS ## 3 75 19000 ARS ## 4 105 85000 ARS ## 5 140 27000 ARS ## 6 267 50000 ARS ## title property_type ## 1 PH - Lomas Del Mirador PH ## 2 PH - Chilavert PH ## 3 Americana a 6 cuadras de la estacion de S.A. de Padua Casa ## 4 PH en alquiler 4 ambientes - Las Cañitas PH ## 5 Casa en Padua 3 dormitorios en alquiler Casa ## 6 Casa en venta o alquiler en La Peregrina Casa ## operation_type lat lon ## 1 Alquiler -34.66253 -58.52914 ## 2 Alquiler -34.54301 -58.57573 ## 3 Alquiler -34.65957 -58.69712 ## 4 Alquiler -34.57207 -58.43249 ## 5 Alquiler -34.66154 -58.71565 ## 6 Alquiler -34.47091 -58.82270 Si queremos filtrar todas las propiedades ubicadas en 3 partidos diferentes como por ejempo La Plata, General San Martín y La Matanza debemos utilizar %in% de la siguiente forma: filtro &lt;- filter(datos_amba, partido %in% c(&quot;La Plata&quot;, &quot;General San Martín&quot;, &quot;La Matanza&quot;)) head(filtro) ## created_on provincia partido rooms surface_total ## 1 202006 GBA La Matanza 2 24 ## 2 202006 GBA General San Martín 2 40 ## 3 202006 GBA La Plata 2 50 ## 4 202006 GBA La Plata 2 35 ## 5 202006 GBA General San Martín 2 56 ## 6 202006 GBA La Plata 3 40 ## surface_covered price currency ## 1 24 12000 ARS ## 2 40 15000 ARS ## 3 50 18000 ARS ## 4 35 13500 ARS ## 5 48 14000 ARS ## 6 40 10000 ARS ## title ## 1 PH - Lomas Del Mirador ## 2 PH - Chilavert ## 3 Alquiler, depto de un domitorio frente al parque San Martin ## 4 Departamento - La Plata ## 5 Departamento céntrico - Villa Ballester ## 6 Departamento - José Hernández ## property_type operation_type lat lon ## 1 PH Alquiler -34.66253 -58.52914 ## 2 PH Alquiler -34.54301 -58.57573 ## 3 Departamento Alquiler -34.93415 -57.96605 ## 4 Departamento Alquiler -34.90645 -57.97335 ## 5 Departamento Alquiler -34.55038 -58.55512 ## 6 Departamento Alquiler -34.89768 -58.02787 En cambio, si queremos filtrar todas las propiedades que no estén ubicadas en 3 partidos diferentes como por ejempo La Plata, General San Martín y La Matanza debemos utilizar ! + %in% de la siguiente forma: filtro &lt;- filter(datos_amba, !(partido %in% c(&quot;La Plata&quot;, &quot;General San Martín&quot;, &quot;La Matanza&quot;))) head(filtro) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 CABA Comuna 13 2 60 50 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 32000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 Depto 2AMB c/ Suite y Toilette - Deheza 1600 - Incluye Cochera ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.61917 -58.46222 ## 2 Departamento Alquiler -34.55460 -58.46652 ## 3 Departamento Alquiler -34.56318 -58.46461 ## 4 Departamento Alquiler -34.61836 -58.36090 ## 5 Departamento Alquiler -34.53344 -58.49345 ## 6 Departamento Alquiler -34.53795 -58.46671 Pero esto no es todo, ¿Cómo hago si quiero filtrar por 2 o más condiciones a la vez? En este caso debemos utilizar los siguientes operadores lógicos: condición 1 &amp; condición 2 -&gt; se cumplen ambas condiciones a la vez condición 1 | condición 2 -&gt; se cumple una u otra de las condiciones condición 1 &amp; ! condición 2 -&gt; se cumple la condición 1 pero no la condición 2 !condición 1 &amp; condición 2 -&gt; no se cumple la condición 1 pero si la condición 2 !(condición 1 &amp; condición 2) -&gt; no se cumple ninguna de las 2 condiciones Por ejemplo, si queremos filtrar todos los registros pertenecientes a la Comuna 5 y a la Comuna 13: filtro &lt;- filter(datos_amba, partido==&quot;Comuna 5&quot; &amp; partido==&quot;Comuna 13&quot;) head(filtro) ## [1] created_on provincia partido rooms ## [5] surface_total surface_covered price currency ## [9] title property_type operation_type lat ## [13] lon ## &lt;0 rows&gt; (or 0-length row.names) El resultado es 0 porque un registro no puede pertenecer a ambas comunas al mismo tiempo, sin embargo si queremos filtrar aquellos que pertenecen a una u otra podemos hacerlo así: filtro &lt;- filter(datos_amba, partido==&quot;Comuna 5&quot; | partido==&quot;Comuna 13&quot;) head(filtro) ## created_on provincia partido rooms surface_total surface_covered price ## 1 202006 CABA Comuna 13 1 30 30 18000 ## 2 202006 CABA Comuna 13 1 31 29 17900 ## 3 202006 CABA Comuna 13 2 60 50 32000 ## 4 202006 CABA Comuna 13 2 53 44 26000 ## 5 202006 CABA Comuna 5 2 45 38 20000 ## 6 202006 CABA Comuna 13 2 55 55 45000 ## currency title ## 1 ARS Retasado! Monoambiente en Nuñez, excelente ubicación! ## 2 ARS Departamento - Belgrano ## 3 ARS Depto 2AMB c/ Suite y Toilette - Deheza 1600 - Incluye Cochera ## 4 ARS Unico 2 ambientes A Estrenar! Posesion inmediata! - Nuñez ## 5 ARS Departamento de 2 ambientes en Alquiler en Almagro ## 6 ARS BLANCO ENCALADA AL 3000 A ESTRENAR ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.55460 -58.46652 ## 2 Departamento Alquiler -34.56318 -58.46461 ## 3 Departamento Alquiler -34.53795 -58.46671 ## 4 Departamento Alquiler -34.54756 -58.47037 ## 5 Departamento Alquiler -34.60613 -58.42947 ## 6 Departamento Alquiler -34.56313 -58.46550 También podemos quedarnos con aquellas propiedades que estén en alquiler y que tengan más de 50m2: filtro &lt;- filter(datos_amba, operation_type==&quot;Alquiler&quot; &amp; surface_covered&gt;=50) head(filtro) ## created_on provincia partido rooms surface_total surface_covered price ## 1 202006 CABA Comuna 13 2 60 50 32000 ## 2 202006 CABA Comuna 13 2 55 55 45000 ## 3 202006 GBA La Plata 2 50 50 18000 ## 4 202006 GBA Ituzaingó 3 75 75 19000 ## 5 202006 GBA Tigre 3 95 80 42000 ## 6 202006 GBA Tigre 3 98 90 42000 ## currency ## 1 ARS ## 2 ARS ## 3 ARS ## 4 ARS ## 5 ARS ## 6 ARS ## title ## 1 Depto 2AMB c/ Suite y Toilette - Deheza 1600 - Incluye Cochera ## 2 BLANCO ENCALADA AL 3000 A ESTRENAR ## 3 Alquiler, depto de un domitorio frente al parque San Martin ## 4 Americana a 6 cuadras de la estacion de S.A. de Padua ## 5 3 AMBIENTES EN EDIFICIO MIRADORES DE LA BAHIA CON COCHERA FIJA ## 6 ¡EN EXCLUSIVA! Departamento en alquiler de 3 ambientes Miradores de La Bahía, Bahía de Nordelta. ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.53795 -58.46671 ## 2 Departamento Alquiler -34.56313 -58.46550 ## 3 Departamento Alquiler -34.93415 -57.96605 ## 4 Casa Alquiler -34.65957 -58.69712 ## 5 Departamento Alquiler -34.39642 -58.64665 ## 6 Departamento Alquiler -34.39512 -58.64665 O con aquellas propiedades que se ubiquen en la Comuna 12, 13 o 14 y que no sean monoambientes: filtro &lt;- filter(datos_amba, partido %in% c(&quot;Comuna 14&quot;, &quot;Comuna 13&quot;, &quot;Comuna 12&quot;) &amp; ! rooms==1) head(filtro) ## created_on provincia partido rooms surface_total surface_covered price ## 1 202006 CABA Comuna 13 2 60 50 32000 ## 2 202006 CABA Comuna 13 2 53 44 26000 ## 3 202006 CABA Comuna 12 2 42 37 22000 ## 4 202006 CABA Comuna 14 2 43 33 27000 ## 5 202006 CABA Comuna 13 2 55 55 45000 ## 6 202006 CABA Comuna 14 2 48 48 23000 ## currency title ## 1 ARS Depto 2AMB c/ Suite y Toilette - Deheza 1600 - Incluye Cochera ## 2 ARS Unico 2 ambientes A Estrenar! Posesion inmediata! - Nuñez ## 3 ARS Depto 2AMB - Av. Balbin 3400 - ALQUILER ## 4 ARS Dos ambientes con Balcón a Demaría y Patio. ## 5 ARS BLANCO ENCALADA AL 3000 A ESTRENAR ## 6 ARS Departamento - Belgrano ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.53795 -58.46671 ## 2 Departamento Alquiler -34.54756 -58.47037 ## 3 Departamento Alquiler -34.55700 -58.47898 ## 4 Departamento Alquiler -34.57421 -58.42243 ## 5 Departamento Alquiler -34.56313 -58.46550 ## 6 Departamento Alquiler -34.56456 -58.43559 ¡Y así se pueden hacer todas las combinaciones de filtros que querramos! ¿Y si en vez de quitar filas queremos quitar columnas? Bueno, aquí tenemos que usar la función de “seleccionar” que veremos a continuación. 2.2 Seleccionar La función select() nos permite elegir u ordenar columnas de nuestro dataset. Esto se puede hacer indicando los nombres completos de las columnas, palabras que contienen, o la letra con la que empiezan o terminan. Graficamente sería algo así: Por ejemplo, de la siguiente forma podríamos quedarnos solo con las columnas created_on, provincia, price y currency: seleccion &lt;- select(datos_amba, created_on, provincia, price, currency) head(seleccion) ## created_on provincia price currency ## 1 202006 CABA 22500 ARS ## 2 202006 CABA 18000 ARS ## 3 202006 CABA 17900 ARS ## 4 202006 CABA 42000 ARS ## 5 202006 GBA 19000 ARS ## 6 202006 GBA 12000 ARS También podríamos elegir que columna/s no queremos tener más en nuestro dataset agregando un “-” antes de su nombre: seleccion &lt;- select(datos_amba, -title) head(seleccion) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency property_type operation_type lat lon ## 1 22500 ARS Departamento Alquiler -34.61917 -58.46222 ## 2 18000 ARS Departamento Alquiler -34.55460 -58.46652 ## 3 17900 ARS Departamento Alquiler -34.56318 -58.46461 ## 4 42000 ARS Departamento Alquiler -34.61836 -58.36090 ## 5 19000 ARS Departamento Alquiler -34.53344 -58.49345 ## 6 12000 ARS PH Alquiler -34.66253 -58.52914 Con “:” podríamos indicar que queremos seleccionar un rango de columnas. Desde price hasta operation_type: seleccion &lt;- select(datos_amba, price:operation_type) head(seleccion) ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type ## 1 Departamento Alquiler ## 2 Departamento Alquiler ## 3 Departamento Alquiler ## 4 Departamento Alquiler ## 5 Departamento Alquiler ## 6 PH Alquiler O con las que ocupan de la posición 7 a la 10: seleccion &lt;- select(datos_amba, 7:10) head(seleccion) ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type ## 1 Departamento ## 2 Departamento ## 3 Departamento ## 4 Departamento ## 5 Departamento ## 6 PH O agregando un “-” adelante podríamos quedarnos con aquellas que no ocupan de la posición 7 a 10: seleccion &lt;- select(datos_amba, -(7:10)) head(seleccion) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## operation_type lat lon ## 1 Alquiler -34.61917 -58.46222 ## 2 Alquiler -34.55460 -58.46652 ## 3 Alquiler -34.56318 -58.46461 ## 4 Alquiler -34.61836 -58.36090 ## 5 Alquiler -34.53344 -58.49345 ## 6 Alquiler -34.66253 -58.52914 Otra opción es seleccionar columnas de acuerdo a la primer letra de los nombres. Por ejemplo aquellas que comienzan con la letra “p”: seleccion &lt;- select(datos_amba, starts_with(&quot;p&quot;)) head(seleccion) ## provincia partido price property_type ## 1 CABA Comuna 7 22500 Departamento ## 2 CABA Comuna 13 18000 Departamento ## 3 CABA Comuna 13 17900 Departamento ## 4 CABA Comuna 1 42000 Departamento ## 5 GBA Vicente López 19000 Departamento ## 6 GBA La Matanza 12000 PH O aquellas que sus nombres terminan con la letra “e”: seleccion &lt;- select(datos_amba, ends_with(&quot;e&quot;)) head(seleccion) ## price ## 1 22500 ## 2 18000 ## 3 17900 ## 4 42000 ## 5 19000 ## 6 12000 ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type ## 1 Departamento Alquiler ## 2 Departamento Alquiler ## 3 Departamento Alquiler ## 4 Departamento Alquiler ## 5 Departamento Alquiler ## 6 PH Alquiler O que sus nombres contengan la palabra “surface”: seleccion &lt;- select(datos_amba, contains(&quot;surface&quot;)) head(seleccion) ## surface_total surface_covered ## 1 40 37 ## 2 30 30 ## 3 31 29 ## 4 35 35 ## 5 36 27 ## 6 24 24 2.3 Modificar Ahora veamos como mutar nuestro dataset agregando nuevas columnas o cambiando el contenido de las existentes. Gráficamente sería algo así: Aprovechando que tenemos los datos del precio total (price) y superficie cubierta (surface_covered) de cada una de las propiedades, agreguemos una nueva columna a nuestro dataset que incluya el valor del m2: modificar &lt;- mutate(datos_amba, price_m2=price/surface_covered) head(modificar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat lon price_m2 ## 1 Departamento Alquiler -34.61917 -58.46222 608.1081 ## 2 Departamento Alquiler -34.55460 -58.46652 600.0000 ## 3 Departamento Alquiler -34.56318 -58.46461 617.2414 ## 4 Departamento Alquiler -34.61836 -58.36090 1200.0000 ## 5 Departamento Alquiler -34.53344 -58.49345 703.7037 ## 6 PH Alquiler -34.66253 -58.52914 500.0000 Si queremos redondear el resultado obtenido, principalmente cuando es una división y por default nos pone varios decimales, tenemos que usar round() y asignar la cantidad de decimales deseados, en este caso usaré 2: modificar &lt;- mutate(datos_amba, price_m2=round(price/surface_covered, 2)) head(modificar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat lon price_m2 ## 1 Departamento Alquiler -34.61917 -58.46222 608.11 ## 2 Departamento Alquiler -34.55460 -58.46652 600.00 ## 3 Departamento Alquiler -34.56318 -58.46461 617.24 ## 4 Departamento Alquiler -34.61836 -58.36090 1200.00 ## 5 Departamento Alquiler -34.53344 -58.49345 703.70 ## 6 PH Alquiler -34.66253 -58.52914 500.00 Como verán, para hacer cálculos entre columnas numéricas podemos utilizar: A/B A dividido B **A*B** A multiplicado por B A+B Suma de A y B A-B Resta de A menos B También podríamos agregar una columna que refleje un cálculo entre una columna existente y un valor extra, por ejemplo pasemos la superficie total de m2 a cm2: modificar &lt;- mutate(datos_amba, surface_total_cm2=surface_total*10000) head(modificar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat lon surface_total_cm2 ## 1 Departamento Alquiler -34.61917 -58.46222 400000 ## 2 Departamento Alquiler -34.55460 -58.46652 300000 ## 3 Departamento Alquiler -34.56318 -58.46461 310000 ## 4 Departamento Alquiler -34.61836 -58.36090 350000 ## 5 Departamento Alquiler -34.53344 -58.49345 360000 ## 6 PH Alquiler -34.66253 -58.52914 240000 Dejando de lado los cálculos, otra posibilidad que tenemos es separar el contenido de una columna en 2, por ejemplo dividamos en año y mes la data que aparece en created_on. Para esto utilizaremos substr(): modificar &lt;- mutate(datos_amba, year = substr(created_on, 1, 4), month = substr(created_on, 5, 6)) head(modificar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat lon year month ## 1 Departamento Alquiler -34.61917 -58.46222 2020 06 ## 2 Departamento Alquiler -34.55460 -58.46652 2020 06 ## 3 Departamento Alquiler -34.56318 -58.46461 2020 06 ## 4 Departamento Alquiler -34.61836 -58.36090 2020 06 ## 5 Departamento Alquiler -34.53344 -58.49345 2020 06 ## 6 PH Alquiler -34.66253 -58.52914 2020 06 Otra aplicación que tiene mutate() es la de agregar columnas con algun contenido que elijamos nosotros, como por ejemplo sumemos una nueva columna que indique la fuente de donde descargamos toda esta información: modificar &lt;- mutate(datos_amba, fuente=&quot;Properati&quot;) head(modificar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat lon fuente ## 1 Departamento Alquiler -34.61917 -58.46222 Properati ## 2 Departamento Alquiler -34.55460 -58.46652 Properati ## 3 Departamento Alquiler -34.56318 -58.46461 Properati ## 4 Departamento Alquiler -34.61836 -58.36090 Properati ## 5 Departamento Alquiler -34.53344 -58.49345 Properati ## 6 PH Alquiler -34.66253 -58.52914 Properati Ahora veamos como modificar el tipo de dato dentro de una columna: class(datos_amba$title) ## [1] &quot;factor&quot; Vemos que la variable “title” es de tipo factor, así que cambiemos su formato a character: modificar &lt;- mutate(datos_amba, title=as.character(title)) class(modificar$title) ## [1] &quot;character&quot; En el ejemplo anterior utilizamos as.character() pero si quisiesemos convertir una variable a factor utilizariamos as.factor(), a numérica as.numeric() o a número entero as.integer(), Por último, veamos como unir 2 columnas de texto en una con paste(): modificar &lt;- mutate(datos_amba, prov_partido=paste(provincia, partido, sep=&quot;_&quot;)) head(modificar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat lon prov_partido ## 1 Departamento Alquiler -34.61917 -58.46222 CABA_Comuna 7 ## 2 Departamento Alquiler -34.55460 -58.46652 CABA_Comuna 13 ## 3 Departamento Alquiler -34.56318 -58.46461 CABA_Comuna 13 ## 4 Departamento Alquiler -34.61836 -58.36090 CABA_Comuna 1 ## 5 Departamento Alquiler -34.53344 -58.49345 GBA_Vicente López ## 6 PH Alquiler -34.66253 -58.52914 GBA_La Matanza 2.4 Ordenar Esta función nos permitirá ordenar las columnas en orden ascendente o descendente como se ve a continuación: Probemos ordenar las filas de nuestro data frame en función de los valores de una o más columnas. Por defecto se ordena en forma ascendente: ordenar &lt;- arrange(datos_amba, surface_total) head(ordenar) ## created_on provincia partido rooms surface_total surface_covered price ## 1 202007 CABA Comuna 15 1 10 10 25000 ## 2 202006 GBA Tigre 2 12 12 10500 ## 3 202007 CABA Comuna 1 1 14 14 35000 ## 4 202006 CABA Comuna 2 1 15 15 12900 ## 5 202007 CABA Comuna 15 1 18 18 48000 ## 6 202006 GBA Morón 1 18 17 35000 ## currency ## 1 USD ## 2 ARS ## 3 USD ## 4 ARS ## 5 USD ## 6 USD ## title ## 1 Garage - Cochera Descubierta en Villa Crespo ## 2 Departamento de 2 ambientes en Pradera, Santa Barbara ## 3 VENTA PH 13,84 M2 PANTA BAJA BALVANERA ## 4 Departamento en Alquiler en Barrio Norte ## 5 Venta Monoambiente estudio con amenities Chacarita ## 6 Lindo monoambiente en 2do piso por escalera al frente. BAJAS EXPENSAS!!! ## property_type operation_type lat lon ## 1 Departamento Venta -34.60330 -58.45547 ## 2 Departamento Alquiler -34.44604 -58.63236 ## 3 PH Venta -34.61566 -58.39221 ## 4 Departamento Alquiler -34.59092 -58.40632 ## 5 Departamento Venta -34.59043 -58.44666 ## 6 Departamento Venta -34.64390 -58.63221 Pero si queremos ordenar en forma descendente debemos aclararlo con desc(): ordenar &lt;- arrange(datos_amba, desc(surface_total)) head(ordenar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202007 GBA Pilar 5 5000 300 ## 2 202006 GBA San Vicente 3 4356 150 ## 3 202007 GBA Pilar 6 3780 320 ## 4 202006 CABA Comuna 13 2 3650 35 ## 5 202007 GBA Luján 4 2703 182 ## 6 202007 GBA Pilar 3 2500 70 ## price currency ## 1 120000 USD ## 2 85000 USD ## 3 220000 USD ## 4 109500 USD ## 5 370000 USD ## 6 121000 USD ## title ## 1 Venta de Casa Quinta ## 2 España entre Buchard y Esmeralda. Casa en venta, San Viciente ## 3 Venta casaquinta Del Viso Residencial Los Jazmines ## 4 Acogedor Departamento de dos ambientes en Belgrano ## 5 Casa 3 dormitorios estilo campo Estancias Golf ## 6 VENTA CASA 2 AMBIENTES PILAR 2500 M2 DE PARQUE!! ## property_type operation_type lat lon ## 1 Casa Venta -34.40066 -58.86919 ## 2 Casa Venta -35.02984 -58.40594 ## 3 Casa Venta -34.45687 -58.79651 ## 4 Departamento Venta -34.55398 -58.44853 ## 5 Casa Venta -34.49543 -59.00930 ## 6 Casa Venta -34.41586 -58.85729 También podemos ordenar por 2 o más columnas. En este caso, R priorizará ordenar la primera, luego la segunda, y asi sucesivamente. Veamos un ejemplo: ordenar &lt;- arrange(datos_amba, partido, rooms) head(ordenar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 GBA Almirante Brown 2 40 40 ## 2 202006 GBA Almirante Brown 2 60 60 ## 3 202006 GBA Almirante Brown 2 50 50 ## 4 202007 GBA Almirante Brown 2 52 48 ## 5 202007 GBA Almirante Brown 2 47 47 ## 6 202007 GBA Almirante Brown 2 50 50 ## price currency ## 1 14500 ARS ## 2 20000 ARS ## 3 125000 USD ## 4 18000 ARS ## 5 16000 ARS ## 6 96000 USD ## title ## 1 Departamento en alquiler ## 2 Departamento - Adrogue ## 3 Departamento - Adrogue ## 4 Venta de Departamento 2 ambientes en Hermoso Edificio a metros de Plaza Brown de Adrogué ## 5 DEPARTAMENTO 2 AMBIENTES EN AV ESPORA AL 800 ## 6 Departamento - Adrogue ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.81144 -58.39264 ## 2 Departamento Alquiler -34.79964 -58.38278 ## 3 Departamento Venta -34.79732 -58.39132 ## 4 Departamento Alquiler -34.79720 -58.38280 ## 5 Departamento Alquiler -34.79880 -58.38863 ## 6 Departamento Venta -34.79913 -58.38364 ordenar &lt;- arrange(datos_amba, partido, desc(rooms)) head(ordenar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202007 GBA Almirante Brown 8 447 189 ## 2 202006 GBA Almirante Brown 7 670 590 ## 3 202006 GBA Almirante Brown 5 239 112 ## 4 202006 GBA Almirante Brown 5 260 120 ## 5 202007 GBA Almirante Brown 5 370 220 ## 6 202006 GBA Almirante Brown 5 180 180 ## price currency ## 1 230000 USD ## 2 1500000 USD ## 3 169000 USD ## 4 248000 USD ## 5 230000 USD ## 6 390000 USD ## title ## 1 Casa c/2 dptos, local y galpón - Lomas del Mirador ## 2 Casa - Adrogue ## 3 A REFACCIONAR! Casona colonial con gran lote, fondo libre, parrilla, 3 dormitorios 2 baños ## 4 Hermoso Duplex 3 dormitorios gran patio 4 cocheras ## 5 Chalet en venta Barrio Santa Rita - Longchamps ## 6 Casa en Construccion en Venta en Barrio Privado &#39;Brisas de Adrogue&#39; ## property_type operation_type lat lon ## 1 Casa Venta -34.86568 -58.37823 ## 2 Casa Venta -34.80905 -58.40631 ## 3 PH Venta -34.79638 -58.38691 ## 4 Casa Venta -34.79746 -58.37885 ## 5 Casa Venta -34.86473 -58.39129 ## 6 Casa Venta -34.81368 -58.40300 2.5 Renombrar Ahora veamos como cambiar los nombres a una o más columnas existentes en nuestro dataset: Empecemos cambiando el nombre de la variable “rooms” por “ambientes”: renombrar &lt;- rename(datos_amba, ambientes=rooms) head(renombrar) ## created_on provincia partido ambientes surface_total ## 1 202006 CABA Comuna 7 1 40 ## 2 202006 CABA Comuna 13 1 30 ## 3 202006 CABA Comuna 13 1 31 ## 4 202006 CABA Comuna 1 1 35 ## 5 202006 GBA Vicente López 1 36 ## 6 202006 GBA La Matanza 2 24 ## surface_covered price currency ## 1 37 22500 ARS ## 2 30 18000 ARS ## 3 29 17900 ARS ## 4 35 42000 ARS ## 5 27 19000 ARS ## 6 24 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.61917 -58.46222 ## 2 Departamento Alquiler -34.55460 -58.46652 ## 3 Departamento Alquiler -34.56318 -58.46461 ## 4 Departamento Alquiler -34.61836 -58.36090 ## 5 Departamento Alquiler -34.53344 -58.49345 ## 6 PH Alquiler -34.66253 -58.52914 Como habrán notado, primero hay que poner el nombre de la nueva columna y luego el de la columna actual. Esto es muy importante, porque si lo hacemos al revés nos dará un error. Ahora veamos un ejemplo y cambiemos los nombres de 3 columnas: renombrar &lt;- rename(datos_amba, ambientes=rooms, m2_cubierto=surface_covered, m2_total=surface_total) head(renombrar) ## created_on provincia partido ambientes m2_total m2_cubierto price ## 1 202006 CABA Comuna 7 1 40 37 22500 ## 2 202006 CABA Comuna 13 1 30 30 18000 ## 3 202006 CABA Comuna 13 1 31 29 17900 ## 4 202006 CABA Comuna 1 1 35 35 42000 ## 5 202006 GBA Vicente López 1 36 27 19000 ## 6 202006 GBA La Matanza 2 24 24 12000 ## currency ## 1 ARS ## 2 ARS ## 3 ARS ## 4 ARS ## 5 ARS ## 6 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat lon ## 1 Departamento Alquiler -34.61917 -58.46222 ## 2 Departamento Alquiler -34.55460 -58.46652 ## 3 Departamento Alquiler -34.56318 -58.46461 ## 4 Departamento Alquiler -34.61836 -58.36090 ## 5 Departamento Alquiler -34.53344 -58.49345 ## 6 PH Alquiler -34.66253 -58.52914 2.6 Resumir y Agrupar Esta función es súper útil cuando manipulamos datos ya que nos permitirá realizar resumenes/sumarios de la data completa, obteniendo por ejemplo valores promedio, máximos o mínimos de una o más columnas. Probemos calculando la mediana de todos los valores que aparecen en la columna surface_covered: summarise(datos_amba, surface_covered=median(surface_covered)) ## surface_covered ## 1 66 O calculemos un promedio de toda la columna surface_total: summarise(datos_amba, surface_covered=mean(surface_covered)) ## surface_covered ## 1 91.98151 También podemos averiguar el valor máximo o mínimo de alguna variable: summarise(datos_amba, surface_covered=max(rooms)) ## surface_covered ## 1 10 summarise(datos_amba, surface_covered=min(rooms)) ## surface_covered ## 1 1 Como verán, esta función resulta útil para ver valores agregados de toda la base, sin embargo, si agrupamos los datos previo a calular los resumenes, los resultados comienzan a ser más específicos. Para esto vamos a utilizar summarise() junto a group_by(). Veamos un ejemplo: Primero agrupemos los datos por la variable “operation_type” Luego calculemos el promedio de superficie cubierta sobre la agrupación realizada previamente. agrupar &lt;- group_by(datos_amba, operation_type) resumir &lt;- summarise(agrupar, surface_covered=mean(surface_covered)) head(resumir) ## # A tibble: 2 x 2 ## operation_type surface_covered ## &lt;fct&gt; &lt;dbl&gt; ## 1 Alquiler 72.9 ## 2 Venta 97.3 Con la agrupación y el resumen podemos ver que la superficie cubierta promedio de las propiedades en alquiler er 72,93m2 y la de las propiedades en venta es 97,28m2. Probemos agrupando por 3 columnas: agrupar &lt;- group_by(datos_amba, operation_type, currency) resumir &lt;- summarise(agrupar, price_m2=mean(price/surface_covered)) head(resumir) ## # A tibble: 2 x 3 ## # Groups: operation_type [2] ## operation_type currency price_m2 ## &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; ## 1 Alquiler ARS 520. ## 2 Venta USD 2689. El valor del m2 promedio para las propiedades en Alquiler es de 520 $ARS mientras que para las propiedaes en venta es de 2.689 USD. Sin embargo, está claro que en el valor de CABA y GBA es diferente, así que calculemos el valor del m2 promedio para cada uno: agrupar &lt;- group_by(datos_amba, operation_type, currency, provincia) resumir &lt;- summarise(agrupar, rooms=mean(price/surface_covered)) head(resumir) ## # A tibble: 4 x 4 ## # Groups: operation_type, currency [2] ## operation_type currency provincia rooms ## &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; ## 1 Alquiler ARS CABA 617. ## 2 Alquiler ARS GBA 399. ## 3 Venta USD CABA 3119. ## 4 Venta USD GBA 2024. Se ve claramente que hay una diferencia entre CABA y GBA, siendo CABA más caro para ambos tipos de operación. Por último probemos desagregando esta información por partido: agrupar &lt;- group_by(datos_amba, operation_type, currency, partido) resumir &lt;- summarise(agrupar, price_m2=mean(price/surface_covered)) head(resumir) ## # A tibble: 6 x 4 ## # Groups: operation_type, currency [1] ## operation_type currency partido price_m2 ## &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; ## 1 Alquiler ARS Almirante Brown 304. ## 2 Alquiler ARS Avellaneda 299. ## 3 Alquiler ARS Berazategui 311. ## 4 Alquiler ARS Comuna 1 699. ## 5 Alquiler ARS Comuna 10 381. ## 6 Alquiler ARS Comuna 11 444. 2.7 Concatenar funciones (%&gt;%) Llegamos al final de la clase, ya vimos varias funciones por separado, pero ¿Qué pasa si queremos aplicarlas todas a la vez? ¿Cómo podemos hacerlo? En este caso debemos usar el operador pipe (%&gt;%) Ctrl+Shift+M que sirve para encadenar funciones, y en vez de realizar una por una, poder realizar todas juntas. Veamos algunos ejemplos: Imaginemos que queremos calcular por mes y para cada provincia (CABA y GBA) cuantas propiedades hubo en venta, con que valor total promedio, con que valor del m2 promedio y con que superficie promedio. Así lo tenemos que hacer según lo aprendido hasta ahora: concatenar &lt;- filter(datos_amba, operation_type==&quot;Venta&quot;) concatenar &lt;- select(concatenar, created_on, provincia, surface_covered, price) concatenar &lt;- group_by(concatenar, created_on, provincia) concatenar &lt;- summarise(concatenar, cantidad=n(), price=mean(price), surface_covered=mean(surface_covered), price_m2=price/surface_covered) head(concatenar) ## # A tibble: 4 x 6 ## # Groups: created_on [2] ## created_on provincia cantidad price surface_covered price_m2 ## &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 202006 CABA 3986 291547. 85.3 3420. ## 2 202006 GBA 2772 231074. 121. 1903. ## 3 202007 CABA 3110 251563. 80.5 3124. ## 4 202007 GBA 1810 206180. 116. 1783. Y así lo deberíamos hacer con pipe %&gt;%: concatenar &lt;- datos_amba %&gt;% filter(operation_type==&quot;Venta&quot;) %&gt;% select(created_on, provincia, surface_covered, price) %&gt;% group_by(created_on, provincia) %&gt;% summarise(cantidad=n(), price=mean(price), surface_covered=mean(surface_covered), price_m2=price/surface_covered) head(concatenar) ## # A tibble: 4 x 6 ## # Groups: created_on [2] ## created_on provincia cantidad price surface_covered price_m2 ## &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 202006 CABA 3986 291547. 85.3 3420. ## 2 202006 GBA 2772 231074. 121. 1903. ## 3 202007 CABA 3110 251563. 80.5 3124. ## 4 202007 GBA 1810 206180. 116. 1783. Como verán, en ambos casos llegamos al mismo resultado, pero sin dudas, la segunda opción es la más óptima. "],
["graficar.html", "Clase 3 GRAFICAR", " Clase 3 GRAFICAR "],
["mapear.html", "Clase 4 MAPEAR", " Clase 4 MAPEAR "]
]
