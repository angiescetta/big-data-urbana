[
["index.html", "BIG DATA URBANA Herramientas y Datos para conocer el Territorio INTRODUCCIÓN PROGRAMA", " BIG DATA URBANA Herramientas y Datos para conocer el Territorio Angie Scetta 2020-10-10 INTRODUCCIÓN ¡Hola a todos! ¡Bienvenidos a BIG DATA URBANA! Estamos en un momento en que las Ciudades producen millones y millones de datos por segundo y hoy tenemos la posibilidad de aprovecharlos desde nuestra profesión para poder trabajar y tomar decisiones en base a evidencia real. El objetivo del curso es presentar a los profesionales interesados en analizar diversas variables territoriales (sociodemográficas, mercado inmobiliario, actividad económica, transporte, movilidad, salud, educación, etc), la importancia de conocer herramientas analíticas que les permitan manipular y extraer conocimiento de grandes volúmenes de datos para tomar mejores decisiones a la hora de diagnosticar, comprender e intervenir el territorio. El curso será práctico y se enseñarán los conocimientos básicos del lenguaje de programación R y del software libre RStudio, y su potencialidad para el análisis de datos urbanos. A lo largo de 4 clases aplicaremos la herramienta a un ejemplo real, con el fin de analizar, describir, interpretar, visualizar y extraer conocimiento de datos existentes. El caso de estudio será el mercado inmobiliario en CABA y se utilizarán datos provenientes de fuentes públicas. Será un curso de 4 clases de 3hs donde se estima un 90% práctico y un 10% teórico. PROGRAMA Clase 1: CONOCER ¿Qué es la Ciencia de Datos? ¿Cómo utilizar grandes volúmenes de datos para analizar dinámicas urbanas? ¿Qué datos existen? Introducción a programación en lenguaje R y el software RStudio. Para esta clase será necesario tener previamente instalado el lenguaje de programación R (https://cloud.r-project.org/) , y la interfaz gráfica RStudio Desktop (https://rstudio.com/products/rstudio/download/). Clase 2: EXPLORAR ¿Qué información contienen las bases de datos? ¿Cómo se estructuran? Las funciones de tidyverse para manipular e interpretar los datos: Extraer información útil a partir de Seleccionar, Filtrar, Ordenar, Modificar y Resumir los datos. Clase 3: GRAFICAR ¿Qué dicen los datos? ¿Cómo puedo facilitar la comprensión de la información? Extraer conocimiento de los datos a partir de la visualización de los mismos. Comunicar resultados a partir de gráficos. Clase 4: MAPEAR ¿Dónde se ubican los datos? ¿Cómo se distribuyen en el territorio? ¿Presentan algún patrón espacial? Análisis espacial de los datos. Visualización a partir de mapas. "],
["conocer.html", "Clase 1 CONOCER", " Clase 1 CONOCER A lo largo del curso trabajaremos con el formato RMarkdown, un tipo de documento de RStudio que integra texto con código de R. Empecemos de a poco: Primero tenemos que crear un nuevo proyecto y un nuevo RMarkdown. Los pasos a seguir pueden encontrarlos en el siguiente tutorial: https://rpubs.com/angiescetta/conociendo-R Ahora si, comencemos! ¿Para que sirve el formato RMawkdown? Este formato sirve para manipular datos y armar informes listos para presentar. Hay 2 formas de escribir en un RMarkdown: Texto como el que estoy escribiendo ahora. Bloques de código (o “chunks”) donde insertaremos nuestras líneas de código con el objetivo de manipular (analizar, modificar, visualizar) los datos. Esto es un chunk: Y se inserta haciendo click en Insert/R o con el siguiente atajo en el teclado: Ctrl + Shift + I Carguemos nuestro primer dataset A lo largo del curso vamos a trabajar con los datos de Properati, un portal web de compra, venta y alquiler de inmuebles en toda América Latina. Estos datos son públicos y pueden encontrarlos en https://properati.com.ar/data. En este caso, para facilitar la manipulación de la información, usaremos un set de datos (en formato csv) previamente procesado que contiene datos de propiedades publicadas en AMBA en Junio y Julio del 2020. Pueden descargarlo de https://data.world/angie-scetta/amba-properati. Recomendación: Al descargarlo, moverlo de la carpeta “Descargas” a la carpeta del Proyecto donde estén trabajando. Ahora si, manos a la obra! Para cargar el dataset pueden copiar la siguiente línea de código y pegarla dentro de un chunk: datos_amba &lt;- read.csv(&quot;data/amba_properati.csv&quot;) Para entender la lógica detrás del chunk anterior pueden revisar este link: https://rpubs.com/angiescetta/importar-dataset Ahora exploremos nuestro dataset, veamos como se estructura (cuantas filas y columnas tiene) y que información trae… Para esto empezaremos utilizando dim(): dim(datos_amba) ## [1] 14929 13 Podemos ver que tenemos 14.929 registros/filas y 13 columnas. También podríamos ver esto por separado de la siguiente forma: ncol(datos_amba) ## [1] 13 nrow(datos_amba) ## [1] 14929 Pero ¿qué contienen esas 13 columnas? Esto podemos verlo con names(): names(datos_amba) ## [1] &quot;created_on&quot; &quot;provincia&quot; &quot;partido&quot; ## [4] &quot;rooms&quot; &quot;surface_total&quot; &quot;surface_covered&quot; ## [7] &quot;price&quot; &quot;currency&quot; &quot;title&quot; ## [10] &quot;property_type&quot; &quot;operation_type&quot; &quot;lat&quot; ## [13] &quot;long&quot; Bien, las columnas tienen fecha de publicación de la propiedad, provincia y partido donde se ubica, cantidad de ambientes, superficie total y superficie cubierta, precio publicado, tipo de moneda (ARS o USD), el título que el usuario escribió al publicar su propiedad, el tipo de propiedad, el tipo de operación, y finalmente la ubicación del inmueble con sus coordenadas: latitud y longitud. Parece que cada fila/registro de la base corresponde a una propiedad publicada, pero veamos una pequeña muestra de la data con head() para estar seguros: head(datos_amba) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat long ## 1 Departamento Alquiler -58.46222 -34.61917 ## 2 Departamento Alquiler -58.46652 -34.55460 ## 3 Departamento Alquiler -58.46461 -34.56318 ## 4 Departamento Alquiler -58.36090 -34.61836 ## 5 Departamento Alquiler -58.49345 -34.53344 ## 6 PH Alquiler -58.52914 -34.66253 Y un resumen estadístico de la información: summary(datos_amba) ## created_on provincia partido rooms ## Min. :202006 CABA:8896 Comuna 14:2001 Min. : 1.000 ## 1st Qu.:202006 GBA :6033 Tigre :1222 1st Qu.: 2.000 ## Median :202006 Comuna 13:1193 Median : 3.000 ## Mean :202006 Comuna 15:1077 Mean : 3.057 ## 3rd Qu.:202007 Comuna 2 : 853 3rd Qu.: 4.000 ## Max. :202007 Comuna 1 : 765 Max. :10.000 ## (Other) :7818 ## surface_total surface_covered price currency ## Min. : 10 Min. : 10.00 Min. : 10000 ARS: 3251 ## 1st Qu.: 51 1st Qu.: 46.00 1st Qu.: 72000 USD:11678 ## Median : 75 Median : 66.00 Median : 140000 ## Mean : 117 Mean : 91.98 Mean : 206342 ## 3rd Qu.: 130 3rd Qu.:108.00 3rd Qu.: 250000 ## Max. :5000 Max. :882.00 Max. :3000000 ## ## title ## Departamento de 2 ambientes en Venta en Villa crespo: 182 ## Departamento de 2 ambientes en Venta en Almagro : 124 ## Departamento de 2 ambientes en Venta en Palermo : 124 ## Departamento de 3 ambientes en Venta en Villa crespo: 121 ## Departamento de 3 ambientes en Venta en Almagro : 108 ## Departamento de 3 ambientes en Venta en Palermo : 108 ## (Other) :14162 ## property_type operation_type lat long ## Casa : 2297 Alquiler: 3251 Min. :-59.04 Min. :-35.12 ## Departamento:11344 Venta :11678 1st Qu.:-58.53 1st Qu.:-34.61 ## PH : 1288 Median :-58.45 Median :-34.59 ## Mean :-58.47 Mean :-34.59 ## 3rd Qu.:-58.41 3rd Qu.:-34.55 ## Max. :-57.83 Max. :-34.26 ## A priori, en este resumen podemos entender varias cosas de la data. Por ejemplo: Hay registros de propiedades publicadas entre Junio (Min) y Julio (Max) 2020 La mayoría de las publicaciones son en CABA (8.896 vs 6.033) El Partido/Comuna que más aparece es la Comuna 14 (Barrio de Palermo), seguido por Tigre. De las 3 tipologías de propiedades, lo que más hay es Departamentos, seguido por Casas y por último PHs. Hay más propiedades en Venta que en Alquiler (11.678 vs 3.251) Por último, investiguemos como es la estructura de la data, es decir que tipo de información tiene cada campo. Si bien algo ya nos imaginamos gracias al summary(), usemos str() para revisarlo: str(datos_amba) ## &#39;data.frame&#39;: 14929 obs. of 13 variables: ## $ created_on : int 202006 202006 202006 202006 202006 202006 202006 202006 202006 202006 ... ## $ provincia : Factor w/ 2 levels &quot;CABA&quot;,&quot;GBA&quot;: 1 1 1 1 2 2 2 1 1 1 ... ## $ partido : Factor w/ 50 levels &quot;Almirante Brown&quot;,..: 18 10 10 6 50 31 27 10 10 6 ... ## $ rooms : int 1 1 1 1 1 2 2 2 2 2 ... ## $ surface_total : int 40 30 31 35 36 24 40 60 53 39 ... ## $ surface_covered: int 37 30 29 35 27 24 40 50 44 34 ... ## $ price : int 22500 18000 17900 42000 19000 12000 15000 32000 26000 14000 ... ## $ currency : Factor w/ 2 levels &quot;ARS&quot;,&quot;USD&quot;: 1 1 1 1 1 1 1 1 1 1 ... ## $ title : Factor w/ 10634 levels &quot;- Casa Venta Tipo Chalet 5 Amb con Cochera - Villa Pueyrredo&quot;,..: 2864 8265 2810 7014 1091 7646 7622 4885 8682 2741 ... ## $ property_type : Factor w/ 3 levels &quot;Casa&quot;,&quot;Departamento&quot;,..: 2 2 2 2 2 3 3 2 2 2 ... ## $ operation_type : Factor w/ 2 levels &quot;Alquiler&quot;,&quot;Venta&quot;: 1 1 1 1 1 1 1 1 1 1 ... ## $ lat : num -58.5 -58.5 -58.5 -58.4 -58.5 ... ## $ long : num -34.6 -34.6 -34.6 -34.6 -34.5 ... Existen varios tipos de datos, pero en nuestro set nos encontramos con 3: integer (int), numeric (num) y Factor. Ahora bien, ¿Qué significa eso? Integer son números enteros, es decir que el campo solo admite números sin decimales como por ejemplo cantidad de habitaciones de una propiedad. Numeric son números con decimales, como por ejemplo, latitud y longitud. Factor son categorías, por ejemplo Barrios, Partidos, Tipos de propiedades, etc. Además del tipo de dato, con str() también podemos ver la cantidad de niveles que tienen las variables de tipo Factor. Por ejemplo, se observa que la columna provincia solo tiene 2 categorías posibles (CABA o AMBA), en cambio la columna partido tiene 50. Próximos Pasos Acá concluye la primer clase, pero los invito a que repliquen lo realizado en clase con algún otro dataset que les interese. Pueden descargar datos de diversos portales abiertos como por ejemplo: Portal de Datos Abiertos de Argentina: https://datos.gob.ar/ Portal de Datos Abiertos de CABA: https://data.buenosaires.gob.ar/ Portal de Datos Abiertos de PBA: https://catalogo.datos.gba.gob.ar/ O de cualquier otro portal de datos que conozcan o encuentren! "],
["explorar.html", "Clase 2 EXPLORAR 2.1 FILTRAR 2.2 MODIFICAR 2.3 SELECCIONAR 2.4 RESUMIR", " Clase 2 EXPLORAR Ahora que ya sabemos abrir un dataset y conocer que información tiene, vamos a aprender a manipular y transformar los datos. Para esto hoy vamos a aprender uno de los paquetes más usados y más útiles de R que se llama tidyverse. Pero ¿Qué es un paquete? Cuando instalamos R ya viene con múltiples funciones básicas para manipular datos, sin embargo el potencial de R surge con la posibilidad de incorporar constantemente nuevas funciones que nos permitan realizar nuevas tareas o mejorar las ya existentes. Estos grupos de funciones son a los que llamamos paquetes o packages y para poder utilizarlos es necesario instalarlos por única vez en la computadora, y luego activarlos cada vez que vayamos a usarlos. Comencemos instalándolo. Esto podemos hacerlo manualmente en Tools/Install packages: O directamente escribiendo install.packages(tidyverse) adentro de un chunk: #install.packages(&quot;tidyverse&quot;) Una vez que instalamos el paquete, no vamos a tener que volver a hacerlo. Solamente vamos a tener que “activarlo” cada vez que quiera usarlo. Esto se hace con library(tidyverse): library(tidyverse) ## Warning: package &#39;tidyverse&#39; was built under R version 3.5.3 ## -- Attaching packages --------------------------------------- tidyverse 1.3.0 -- ## v ggplot2 3.3.0 v purrr 0.3.3 ## v tibble 3.0.0 v dplyr 0.8.3 ## v tidyr 1.0.2 v stringr 1.4.0 ## v readr 1.3.1 v forcats 0.5.0 ## Warning: package &#39;ggplot2&#39; was built under R version 3.5.3 ## Warning: package &#39;tidyr&#39; was built under R version 3.5.3 ## Warning: package &#39;readr&#39; was built under R version 3.5.3 ## Warning: package &#39;purrr&#39; was built under R version 3.5.3 ## Warning: package &#39;dplyr&#39; was built under R version 3.5.3 ## Warning: package &#39;stringr&#39; was built under R version 3.5.3 ## Warning: package &#39;forcats&#39; was built under R version 3.5.3 ## -- Conflicts ------------------------------------------ tidyverse_conflicts() -- ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() Antes de comenzar volvamos a cargar nuestro dataset: datos_amba &lt;- read.csv(&quot;data/amba_properati.csv&quot;) A continuación veremos como el paquete tidyverse nos va a permitir filtrar, modificar, seleccionar, ordenar, renombrar, resumir y agrupar los datos. 2.1 FILTRAR Filtrar, como su nombre lo indica, hace referencia a realizar un filtro determinado sobre los registros/filas de toda la base de datos. Gráficamente se vería como algo así: Es decir que, nos será muy útil si por algún motivo queremos dejar de lado algunos registros y utilizar solo una parte de la base, por ejemplo podríamos filtrar los registros ubicados en CABA: filtro &lt;- filter(datos_amba, provincia==&quot;CABA&quot;) head(filtro) ## created_on provincia partido rooms surface_total surface_covered price ## 1 202006 CABA Comuna 7 1 40 37 22500 ## 2 202006 CABA Comuna 13 1 30 30 18000 ## 3 202006 CABA Comuna 13 1 31 29 17900 ## 4 202006 CABA Comuna 1 1 35 35 42000 ## 5 202006 CABA Comuna 13 2 60 50 32000 ## 6 202006 CABA Comuna 13 2 53 44 26000 ## currency title ## 1 ARS Departamento - Flores ## 2 ARS Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 ARS Departamento - Belgrano ## 4 ARS Monoambiente con cochera. Zencity. Puerto Madero ## 5 ARS Depto 2AMB c/ Suite y Toilette - Deheza 1600 - Incluye Cochera ## 6 ARS Unico 2 ambientes A Estrenar! Posesion inmediata! - Nuñez ## property_type operation_type lat long ## 1 Departamento Alquiler -58.46222 -34.61917 ## 2 Departamento Alquiler -58.46652 -34.55460 ## 3 Departamento Alquiler -58.46461 -34.56318 ## 4 Departamento Alquiler -58.36090 -34.61836 ## 5 Departamento Alquiler -58.46671 -34.53795 ## 6 Departamento Alquiler -58.47037 -34.54756 O los del mes de Julio 2020: a &lt;- filter(datos_amba, created_on==202007) head(a) ## created_on provincia partido rooms surface_total surface_covered price ## 1 202007 GBA Tigre 2 108 69 20000 ## 2 202007 GBA Tigre 2 57 45 27500 ## 3 202007 CABA Comuna 14 1 45 40 23000 ## 4 202007 CABA Comuna 14 2 48 48 30000 ## 5 202007 CABA Comuna 14 2 42 37 26000 ## 6 202007 CABA Comuna 15 2 41 38 21000 ## currency ## 1 ARS ## 2 ARS ## 3 ARS ## 4 ARS ## 5 ARS ## 6 ARS ## title ## 1 DEPARTAMENTO EN ALQUILER EN NORDELTA 2 AMB CON TERRAZA Y JACUZZI ## 2 2 ambientes con cochera y baulera - Vista al Lago Central ## 3 Departamento en Alquiler con Balcón y Amenities ## 4 Botánico - 2 ambientes amueblado con vista a Boulevard Cerviño ## 5 Departamento - Palermo ## 6 Departamento de 2 ambientes en Alquiler en Palermo ## property_type operation_type lat long ## 1 Departamento Alquiler -58.64925 -34.39437 ## 2 Departamento Alquiler -58.63129 -34.40910 ## 3 Departamento Alquiler -58.42749 -34.59274 ## 4 Departamento Alquiler -58.41289 -34.57914 ## 5 Departamento Alquiler -58.41587 -34.59571 ## 6 Departamento Alquiler -58.43026 -34.59856 Nótese que para filtrar bajo la condición de “igual” utilicé “==”, pero también podría haber utilizado otras condiciones como: == igual a != diferente a &lt; menor a &lt;= menor o igual a &gt; mayor a &gt;= mayor o igual a Entonces, por ejemplo si quiero filtrar solo las propiedades que tienen una superficie cubierta mayor o igual a 75m2 debería escribirlo así: filtro &lt;- filter(datos_amba, surface_covered&gt;=75) head(filtro) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 GBA Ituzaingó 3 75 75 ## 2 202006 GBA Tigre 3 95 80 ## 3 202006 GBA Tigre 3 98 90 ## 4 202006 CABA Comuna 13 3 109 94 ## 5 202006 CABA Comuna 14 3 152 152 ## 6 202006 CABA Comuna 14 3 90 85 ## price currency ## 1 19000 ARS ## 2 42000 ARS ## 3 42000 ARS ## 4 90000 ARS ## 5 240000 ARS ## 6 80000 ARS ## title ## 1 Americana a 6 cuadras de la estacion de S.A. de Padua ## 2 3 AMBIENTES EN EDIFICIO MIRADORES DE LA BAHIA CON COCHERA FIJA ## 3 ¡EN EXCLUSIVA! Departamento en alquiler de 3 ambientes Miradores de La Bahía, Bahía de Nordelta. ## 4 Alquiler Depto 3 Amb a Estrenar Nuñez C/Cochera ## 5 ALQUILER en TORRES DE GELLY 152 m2 con 2 dorm dep y 1 coch ALTO vista Rio SIN muebles ## 6 ALQUILER 3 AMB CON DEPENDENCIA! - Y COCHERA TORRE AMENITIES!! ## property_type operation_type lat long ## 1 Casa Alquiler -58.69712 -34.65957 ## 2 Departamento Alquiler -58.64665 -34.39642 ## 3 Departamento Alquiler -58.64665 -34.39512 ## 4 Departamento Alquiler -58.46286 -34.54521 ## 5 Departamento Alquiler -58.40499 -34.57760 ## 6 Departamento Alquiler -58.41462 -34.59353 Pero no solo esto, ¿Cómo hago si quiero filtrar por 2 o más condiciones a la vez? En este caso debemos utilizar los siguientes operadores lógicos: condición 1 &amp; condición 2 se cumplen ambas condiciones a la vez condición 1 | condición 2 se cumple solo una u otra de las condiciones condición 1 &amp; !condición 2 se cumple la condición 1 pero no la condición 2 !condición 1 &amp; condición 2 no se cumple la condición 1 pero si la condición 2 !(condición 1 &amp; condición 2) no se cumple ninguna de las 2 condiciones filtro &lt;- filter(datos_amba, partido==&quot;Comuna 13&quot; | partido==&quot;Comuna 5&quot;) head(filtro) ## created_on provincia partido rooms surface_total surface_covered price ## 1 202006 CABA Comuna 13 1 30 30 18000 ## 2 202006 CABA Comuna 13 1 31 29 17900 ## 3 202006 CABA Comuna 13 2 60 50 32000 ## 4 202006 CABA Comuna 13 2 53 44 26000 ## 5 202006 CABA Comuna 5 2 45 38 20000 ## 6 202006 CABA Comuna 13 2 55 55 45000 ## currency title ## 1 ARS Retasado! Monoambiente en Nuñez, excelente ubicación! ## 2 ARS Departamento - Belgrano ## 3 ARS Depto 2AMB c/ Suite y Toilette - Deheza 1600 - Incluye Cochera ## 4 ARS Unico 2 ambientes A Estrenar! Posesion inmediata! - Nuñez ## 5 ARS Departamento de 2 ambientes en Alquiler en Almagro ## 6 ARS BLANCO ENCALADA AL 3000 A ESTRENAR ## property_type operation_type lat long ## 1 Departamento Alquiler -58.46652 -34.55460 ## 2 Departamento Alquiler -58.46461 -34.56318 ## 3 Departamento Alquiler -58.46671 -34.53795 ## 4 Departamento Alquiler -58.47037 -34.54756 ## 5 Departamento Alquiler -58.42947 -34.60613 ## 6 Departamento Alquiler -58.46550 -34.56313 filtro &lt;- filter(datos_amba, surface_total&gt;=100 &amp; operation_type==&quot;Alquiler&quot;) head(filtro) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 13 3 109 94 ## 2 202006 CABA Comuna 14 3 152 152 ## 3 202006 CABA Comuna 14 3 152 152 ## 4 202006 CABA Comuna 14 3 152 152 ## 5 202006 CABA Comuna 1 3 135 130 ## 6 202006 CABA Comuna 14 4 125 105 ## price currency ## 1 90000 ARS ## 2 240000 ARS ## 3 240000 ARS ## 4 240000 ARS ## 5 210000 ARS ## 6 85000 ARS ## title ## 1 Alquiler Depto 3 Amb a Estrenar Nuñez C/Cochera ## 2 ALQUILER en TORRES DE GELLY 152 m2 con 2 dorm dep y 1 coch ALTO vista Rio SIN muebles ## 3 ALQUILER en TORRES DE GELLY 152 m2 con 2 dorm dep y 1 coch ALTO vista Rio ## 4 ALQUILER en TORRES DE GELLY 152 m2 con 2 dorm dep y 1 coch ALTO vista Rio SIN muebles ## 5 Depto alquiler 3 ambientes con cochera y amenities en Torre River View, Puerto Madero ## 6 PH en alquiler 4 ambientes - Las Cañitas ## property_type operation_type lat long ## 1 Departamento Alquiler -58.46286 -34.54521 ## 2 Departamento Alquiler -58.40499 -34.57760 ## 3 Departamento Alquiler -58.40499 -34.57760 ## 4 Departamento Alquiler -58.40499 -34.57760 ## 5 Departamento Alquiler -58.36306 -34.60608 ## 6 PH Alquiler -58.43249 -34.57207 2.2 MODIFICAR modificar &lt;- mutate(datos_amba, price_m2=price/surface_covered) head(modificar) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type lat long price_m2 ## 1 Departamento Alquiler -58.46222 -34.61917 608.1081 ## 2 Departamento Alquiler -58.46652 -34.55460 600.0000 ## 3 Departamento Alquiler -58.46461 -34.56318 617.2414 ## 4 Departamento Alquiler -58.36090 -34.61836 1200.0000 ## 5 Departamento Alquiler -58.49345 -34.53344 703.7037 ## 6 PH Alquiler -58.52914 -34.66253 500.0000 2.3 SELECCIONAR seleccion &lt;- select(datos_amba, created_on, provincia, price, currency) head(seleccion) ## created_on provincia price currency ## 1 202006 CABA 22500 ARS ## 2 202006 CABA 18000 ARS ## 3 202006 CABA 17900 ARS ## 4 202006 CABA 42000 ARS ## 5 202006 GBA 19000 ARS ## 6 202006 GBA 12000 ARS seleccion &lt;- select(datos_amba, -title) head(seleccion) ## created_on provincia partido rooms surface_total surface_covered ## 1 202006 CABA Comuna 7 1 40 37 ## 2 202006 CABA Comuna 13 1 30 30 ## 3 202006 CABA Comuna 13 1 31 29 ## 4 202006 CABA Comuna 1 1 35 35 ## 5 202006 GBA Vicente López 1 36 27 ## 6 202006 GBA La Matanza 2 24 24 ## price currency property_type operation_type lat long ## 1 22500 ARS Departamento Alquiler -58.46222 -34.61917 ## 2 18000 ARS Departamento Alquiler -58.46652 -34.55460 ## 3 17900 ARS Departamento Alquiler -58.46461 -34.56318 ## 4 42000 ARS Departamento Alquiler -58.36090 -34.61836 ## 5 19000 ARS Departamento Alquiler -58.49345 -34.53344 ## 6 12000 ARS PH Alquiler -58.52914 -34.66253 seleccion &lt;- select(datos_amba, price:operation_type) head(seleccion) ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type ## 1 Departamento Alquiler ## 2 Departamento Alquiler ## 3 Departamento Alquiler ## 4 Departamento Alquiler ## 5 Departamento Alquiler ## 6 PH Alquiler seleccion &lt;- select(datos_amba, 7:10) head(seleccion) ## price currency ## 1 22500 ARS ## 2 18000 ARS ## 3 17900 ARS ## 4 42000 ARS ## 5 19000 ARS ## 6 12000 ARS ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type ## 1 Departamento ## 2 Departamento ## 3 Departamento ## 4 Departamento ## 5 Departamento ## 6 PH seleccion &lt;- select(datos_amba, starts_with(&quot;p&quot;)) head(seleccion) ## provincia partido price property_type ## 1 CABA Comuna 7 22500 Departamento ## 2 CABA Comuna 13 18000 Departamento ## 3 CABA Comuna 13 17900 Departamento ## 4 CABA Comuna 1 42000 Departamento ## 5 GBA Vicente López 19000 Departamento ## 6 GBA La Matanza 12000 PH seleccion &lt;- select(datos_amba, ends_with(&quot;e&quot;)) head(seleccion) ## price ## 1 22500 ## 2 18000 ## 3 17900 ## 4 42000 ## 5 19000 ## 6 12000 ## title ## 1 Departamento - Flores ## 2 Retasado! Monoambiente en Nuñez, excelente ubicación! ## 3 Departamento - Belgrano ## 4 Monoambiente con cochera. Zencity. Puerto Madero ## 5 Alquiler TORRE dpto de 1o2 ambientes - excelente luz y vista cochera optativa ## 6 PH - Lomas Del Mirador ## property_type operation_type ## 1 Departamento Alquiler ## 2 Departamento Alquiler ## 3 Departamento Alquiler ## 4 Departamento Alquiler ## 5 Departamento Alquiler ## 6 PH Alquiler seleccion &lt;- select(datos_amba, contains(&quot;surface&quot;)) head(seleccion) ## surface_total surface_covered ## 1 40 37 ## 2 30 30 ## 3 31 29 ## 4 35 35 ## 5 36 27 ## 6 24 24 2.4 RESUMIR a &lt;- mutate(a, price_m2=price/surface_covered) a &lt;- select(a, -price) summarise(a, price_m2=median(price_m2)) ## price_m2 ## 1 2189.039 a &lt;- group_by(a, partido) a &lt;- summarise(a, price_m2=median(price_m2)) a &lt;- arrange(a, desc(price_m2)) head(a) ## # A tibble: 6 x 2 ## partido price_m2 ## &lt;fct&gt; &lt;dbl&gt; ## 1 Comuna 14 3048. ## 2 Comuna 13 2974. ## 3 San Isidro 2766. ## 4 Comuna 12 2763. ## 5 Comuna 2 2753. ## 6 Comuna 6 2538. "],
["graficar.html", "Clase 3 GRAFICAR", " Clase 3 GRAFICAR library(tidyverse) datos_amba &lt;- read.csv(&quot;data/amba_properati.csv&quot;) ggplot()+ geom_bar(data=datos_amba, aes(x=partido, weight=price)) + coord_flip() ggplot()+ geom_point(data=datos_amba, aes(x=surface_covered, y=price)) ggplot()+ geom_point(data=datos_amba, aes(x=surface_covered, y=price)) + facet_wrap(~provincia) ggplot()+ geom_point(data=datos_amba, aes(x=long, y=lat)) ¿Tiene forma de AMBA? options(scipen=999) "],
["mapear.html", "Clase 4 MAPEAR", " Clase 4 MAPEAR Llegamos al final del curso y ahora nos toca mapear toda la información que estuvimos analizando las clases anteriores. Para esto vamos a tener que instalar un nuevo paquete llamado sf y luego activarlo con library() al igual que como lo veníamos haciendo con tidyverse: library(tidyverse) #install.packages(sf) library(sf) ## Linking to GEOS 3.6.1, GDAL 2.2.3, PROJ 4.9.3 datos_amba &lt;- read.csv(&quot;data/amba_properati.csv&quot;) Descarguen el zip con el shape de los partidos de amba en el siguiente link https://data.world/angie-scetta/partidos-amba partidos_amba &lt;- st_read(&quot;data/partidos_amba.shp&quot;) ## Reading layer `partidos_amba&#39; from data source `E:\\03-OTROS\\SCA-CURSOS-2020\\sca-big-data-urbana\\data\\partidos_amba.shp&#39; using driver `ESRI Shapefile&#39; ## Simple feature collection with 144 features and 2 fields ## geometry type: MULTIPOLYGON ## dimension: XY ## bbox: xmin: -59.3392 ymin: -35.23893 xmax: -57.70946 ymax: -34.00243 ## CRS: 4326 mapear &lt;- datos_amba %&gt;% filter(operation_type==&quot;Venta&quot;, created_on==max(created_on)) mapear &lt;- mapear %&gt;% group_by(partido) %&gt;% summarise(cantidad=n(), price_m2=median(price/surface_covered)) partidos_amba &lt;- left_join(partidos_amba, mapear, by=c(&quot;nombre&quot;=&quot;partido&quot;)) ## Warning: Column `nombre`/`partido` joining factors with different levels, ## coercing to character vector ggplot()+ geom_sf(data=partidos_amba, aes(fill=price_m2)) ggplot()+ geom_sf(data=partidos_amba, aes(fill=price_m2), color=NA) + labs(title = &quot;Valor del m2 por Partido&quot;, subtitle = &quot;AMBA&quot;, fill = &quot;USD/m2&quot;, caption= &quot;Fuente: Properati&quot;)+ scale_fill_gradient(low=&quot;lightgoldenrodyellow&quot;, high=&quot;deeppink4&quot;) + theme_void() ggplot()+ geom_sf(data=partidos_amba, aes(fill=cantidad), color=NA) + labs(title = &quot;Propiedades en venta por Partido&quot;, subtitle = &quot;AMBA&quot;, fill = &quot;Cantidad&quot;, caption= &quot;Fuente: Properati&quot;)+ scale_fill_gradient(low=&quot;lightgoldenrodyellow&quot;, high=&quot;deeppink4&quot;) + theme_void() "]
]
